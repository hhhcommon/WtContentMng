<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>#####audioname#####</title>
	<meta name="viewport" id="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1,user-scalable=no">
  <meta name="keywords" content="#####audiodescn#####">
  <meta name="description" content="#####audiodescn#####">
  <link rel="shortcut icon" href="../../imgs/favicon.ico" />
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.css">
  <link href="../../css/index_jm.css" text="text/css" rel="stylesheet" />
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
  <script>
    $(document).bind('mobileinit',function(){
      $.mobile.changePage.defaults.changeHash = false;
      $.mobile.hashListeningEnabled = false;
      $.mobile.pushStateEnabled = false;
    });
  </script> 
  <script src="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.js"></script>
  <script src="../../js/mainPage.js"></script>
  <script src="../../js/context.utils.js"></script>
  <script src="../../js/index_jm.js"></script>
</head>
<body>
  <img class="timg" style="width:0px;height:0px;opacity: 0;position:absolute ;" src="#####audioimgs#####" />
  <div class="container">
    <!--头部开始-->
    <header>
      <div id="logo"><img src="../../imgs/logo2.png" /></div>
      <div class="downLoad">打开收听</div>
    </header>
    <!--播放控制界面-->
    <div class="palyCtrlBox">
      <h4>#####audioname#####</h4>
      <img src="" alt="" />
      <div class="box" >
        <div class="boximg" style="background-image: url(#####audioimgs#####)"></div>
        <img src="../../imgs/jm.png"/>
        <a href="javascript:void(0);" class="playControl"></a>
        <a href="javascript:void(0);" class="previous"></a>
        <a href="javascript:void(0);" class="next"></a>
      </div>
      <div class="conPlay">
        <span class="playTime"></span>
        <div class="currentMusicBar">
          <div class="currentMusicBarRound"></div>
        </div>
        <span class="fullTime"></span>
      </div>
      <audio src="#####audioplay#####" id="jmAudio" jmOpenApp="com.woting.htmlcallback://#####mediatype#####?jsonStr={'ContentId':'#####audioid#####'}"></audio>
      <ul class="ul">
        <li class="like">
          <span class="lis">喜欢</span>
          <img class="lii" src="../../imgs/wt_person_like.png" alt=""/>
        </li>
        <li class="border"> 
          <span class="lis">分享</span>
          <img class="lii" src="../../imgs/wt_share.png" alt=""/>
        </li>
      </ul>
    </div>
    <div class="detail">
      <div class="dt">
        <img class="xq" src="../../imgs/xq.png" alt="" />
        <span>节目详情</span>
      </div>
      <p class="dp1"><span class="ft_ccc">主播:</span><span class="dpspan">#####audiozhubo#####</span></p>
      <p class="dp2"><span class="ft_ccc">专辑:</span><span class="dpspan">#####audioseq#####</span></p>
      <p class="dp3"><span class="ft_ccc">来源:</span><span class="dpspan">#####audiosource#####</span></p>
      <div class="dp4">
        <span class="ft_ccc jj">简介:</span>
        <div class="js dpspan">#####audiodescn#####</div>
      </div>
    </div>
    <!--相关推荐列表-->
    <div class="tj">
      <span class="tjh4 active">相关推荐</span>
      <span class="tjh4">查看评论</span>
    </div>
    <div class="audioList">
      <ul class="ulBox"></ul>
      <ul class="comment"></ul>
    </div>
  </div>
</body>
<script>
  /*
  判断是手机还是电脑访问(暂时先不用这段代码)
  */
  //平台、设备和操作系统
  var system = {
    win: false,
    mac: false,
    xll: false,
    ipad:false
  };
  var pcdType="";
  var mobileClass="";
  //检测平台
  var p = navigator.platform;
  system.win = p.indexOf("Win") == 0;
  system.mac = p.indexOf("Mac") == 0;
  system.x11 = (p == "X11") || (p.indexOf("Linux") == 0);
  system.ipad = (navigator.userAgent.match(/iPad/i) != null)?true:false;
  //跳转语句，如果是手机访问就自动跳转到wap.baidu.com页面
  if (system.win || system.mac || system.xll||system.ipad) {
    // alert("电脑");
    pcdType="3";
    // 判断浏览器类型
    var Sys = {};//百度的，可用
    var ua = navigator.userAgent.toLowerCase();
    var s;
    (s = ua.match(/msie ([\d.]+)/)) ? Sys.ie = s[1] :
    (s = ua.match(/firefox\/([\d.]+)/)) ? Sys.firefox = s[1] :
    (s = ua.match(/chrome\/([\d.]+)/)) ? Sys.chrome = s[1] :
    (s = ua.match(/opera.([\d.]+)/)) ? Sys.opera = s[1] :
    (s = ua.match(/version\/([\d.]+).*safari/)) ? Sys.safari = s[1] : 0;
    //以下进行测试
    if (Sys.ie) mobileClass=Sys.ie;
    if (Sys.firefox) mobileClass=Sys.firefox;
    if (Sys.chrome) mobileClass=Sys.chrome;
    if (Sys.opera) mobileClass=Sys.opera;
    if (Sys.safari) mobileClass=Sys.safari;
  } else {
    // alert("手机");
    pcdType="1";
    //判断手机型号
    mobileClass="HUAWEI";
  }
</script>
<script>
  var rootPath=getRootPath();
  var tImg=$(".timg").attr("src");//分享的缩略图
  var url=window.location.href.split('#')[0];
  url=url.replace('&', '%26');
  var data={
    "DeviceId":"3279A27149B24719991812E6ADBA5584",
    "PCDType":"3",
    "MobileClass":"Chrome",
    "SharePath":url
  };
  $.ajax({
    url: rootPath+"share/getWXConfig.do",
    type:"POST",
    dataType:"json",
    data:data,
    success: function(resultData) {
      if(resultData.ReturnType=="1001"){
        getWXConfig(resultData);
      }else{
        return;
      }
    },
    error: function(jqXHR){
      alert("发生错误" + jqXHR.status);
    }
  });
  function getWXConfig(resultData){
    wx.config({
      debug: false ,// 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
      appId:resultData.Result.AppId, // 必填，公众号的唯一标识
      timestamp:resultData.Result.TimeStamp, // 必填，生成签名的时间戳
      nonceStr:resultData.Result.NonceStr, // 必填，生成签名的随机串
      signature:resultData.Result.Signature,// 必填，签名，见附录1
      jsApiList: [
        // 必填，所有要调用的 API 都要加到这个列表中
        'onMenuShareTimeline',
        'onMenuShareAppMessage',
        'onMenuShareQZone',
        'onMenuShareQQ'
      ]
    });
    wx.ready(function () { // 在这里调用 API
      //批量隐藏功能按钮接口
      wx.hideMenuItems({
        menuList: [ // 要隐藏的菜单项，所有menu项见附录3
          /*  
            'menuItem:share:qq',
            'menuItem:share:weiboApp'
            'menuItem:openWithSafari',
            'menuItem:openWithQQBrowser',
            'menuItem:favorite',
            'menuItem:share:facebook',
            'menuItem:share:QZone',
          */
        ] 
      });
      //分享到朋友圈
      wx.onMenuShareTimeline({
        title:'#####audioname#####', // 分享标题
        desc:'#####audiodescn#####', // 分享描述
        link: url, // 分享链接
        imgUrl: tImg, // 分享图标
        success: function (){ // 用户确认分享后执行的回调函数
//        alert('分享成功');
        },
        cancel: function (){ // 用户取消分享后执行的回调函数
//        alert('取消分享');
        },
        fail: function(){ // 用户分享失败后执行的回调函数
//        alert('分享失败');
        }
      });
      //分享给朋友
      wx.onMenuShareAppMessage({
        title:'#####audioname#####', // 分享标题
        desc:'#####audiodescn#####', // 分享描述
        link:url, // 分享链接
        imgUrl: tImg, // 分享图标
        success: function (){ // 用户确认分享后执行的回调函数
//        alert('分享成功');
        },
        cancel: function (){ // 用户取消分享后执行的回调函数
//        alert('取消分享');
        },
        fail: function(){ // 用户分享失败后执行的回调函数
//        alert('分享失败');
        }
      });
      //分享到qq
      wx.onMenuShareQQ({
        title:'#####audioname#####', // 分享标题
        desc:' #####audiodescn#####', // 分享描述
        link:url, // 分享链接
        imgUrl:tImg, // 分享图标
        success: function (){ // 用户确认分享后执行的回调函数
//        alert('分享qq成功');
        },
        cancel: function (){ // 用户取消分享后执行的回调函数
//        alert('取消分享qq');
        },
        fail: function(){ // 用户分享失败后执行的回调函数
//        alert('分享qq失败');
        }
      });
      //分享到qq空间
      wx.onMenuShareQZone({
        title:'#####audioname#####', // 分享标题
        desc:' #####audiodescn#####',//分享描述
        link:url, // 分享链接
        imgUrl:tImg,// 分享图标
        success: function (){ // 用户确认分享后执行的回调函数
//        alert('分享qq空间成功');
        },
        cancel: function (){ // 用户取消分享后执行的回调函数
//        alert('取消分享qq空间');
        },
        fail: function(){ // 用户分享失败后执行的回调函数
//        alert('分享qq空间失败');
        }
      });
    })
  }
</script>
</html>
