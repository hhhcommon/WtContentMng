<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>声音管理</title>
<meta name="keywords" content="">
<meta name="description" content="">
<link href="../resources/plugins/hplus/css/bootstrap.min.css"
  rel="stylesheet">
<link href="../resources/plugins/hplus/css/font-awesome.min.css"
  rel="stylesheet">
<link href="../resources/plugins/hplus/css/animate.min.css"
  rel="stylesheet">
<link href="../resources/plugins/hplus/css/style.min.css"
  rel="stylesheet">
<link href="../resources/css/host.css" rel="stylesheet">
</head>
<body>
  <div class="" style="padding:0 25px;">
    <!-- 操作和状态显示 -->
    <div class="" style="width:100%;height:70px;line-height:70px;">
      <span>共3个专辑</span>
      <button class="btn btn-warning" style="display:inline;width:auto;height:30px;float:right;padding:2px 12px;margin:15px 8px;">创建专辑</button>
    </div>
    <!-- 列表显示区 -->
    <div class="actList"></div>
  </div>
  <!-- 全局js -->
  <script src="../resources/plugins/hplus/js/jquery-2.1.1.min.js"></script>
  <script src="../resources/plugins/hplus/js/bootstrap.min.js"></script>
  <!-- 自定义js -->
  <script src="../resources/plugins/hplus/js/content.min(1).js"></script>

  <script src="../resources/js/context.utils.js"></script>
  <script src="../resources/js/host.js"></script>
  <!-- jQuery Validation plugin javascript-->
  <script src="../resources/plugins/hplus/js/plugins/validate/jquery.validate.min.js"></script>

  <script>
    $().ready(function() {
    	//获得父窗口window -> $(window.top) 或$(window.parent)  window可以省略
    	//获得父窗口document -> $(window.top.document)
    	//获取父窗口元素  ->$(window.top.document).find()
    	
      //获取列表
      getAudioList("123", "wt_MediaAsset");
      function getAudioList(UserId, MediaType) {
        $.ajax({
          type : "POST",
          url : "http://localhost:908/CM/content/getHostContents.do",
          dataType : "json",
          data : JSON.stringify({
            "UserId" : UserId,
            "MediaType" : MediaType
          }),
          beforeSend : function() {
            $(".actList").html("<div style='text-align:center;height:300px;line-height:200px;'>数据加载中...</div>")
          },
          success : function(resultData) {
            if (resultData.ReturnType == "1001") {
              $(".actList").html(""); //再重新创建新的数据集时，先清空之前的
              ContentListLoad(resultData);
            } else {
              $(".actList").html("<div style='text-align:center;height:300px;padding:20px;padding-top:140px;'>"+ resultData.Message)+ ")";
            }
          },
          error : function(jqXHR) {
            $(".actList").html("<div style='text-align:center;height:300px;line-height:200px;'>获取数据发生错误："+ jqXHR.status+ "</div>");
          }
        });
      }
      //点击创建专辑按钮，弹出创建专辑界面
      $(".btn").on("click",function(){
    	  $(window.top.document).find(".shade").css({"display":"block"});
    	  $(".opeBox").css({"display":"block"});
      })
      //初始化创建专辑元素的位置
      $(".opeBox").css({"left":($(window).width()-$(".opeBox").width())/2});
      //点击遮罩，或取消，确定，关闭这些点时，隐藏窗口和遮罩
      $(window.top.document).find(".shade").on("click",function(){
    	  $(this).css({"display":"none"});
    	  $(".opeBox").css({"display":"none"});
      });
      
      //创建节目列表DOM树
      function ContentListLoad(actList) {
        var actListLength = actList.ResultList.AllCount;
        if (actListLength == 0) {
          $(".actList").html("<div style='text-align:center;height:500px;line-height:300px;'>还没有创建节目哦！</div>");
        } else {
          //声明下面需要创建的节点，以便添加内容和添加到文档中
          var actListDiv,listDiv,imgDiv,imgA,thumbImg,infoDiv,infoH,infHA,infoP1,infoP2;
          //循环加载列表
          for (var i = 0; i < actListLength; i++) {
            listDiv = $("<div class='listBox'></div>");
            imgDiv = $("<div class='imgBox'>");
            imgA=$("<a href='javascript:;'></a>");
            thumbImg = $("<img alt='image'>");
            thumbImg.attr({'src' : actList.ResultList.List[i].ContentImg});
            infoDiv = $("<div class='infoBox'>");
            infoH = $("<h4></h4>");
            infoHA=$("<a href='javascript:;'></a>");
            infoHA.text(actList.ResultList.List[i].ContentName);
            infoP1 = $("<p class='subCount'></p>");
            //infoP1.text(actList.ResultList.List[i].SubCount+"个声音");
            infoP1.text("12个声音");
            infoP2 = $("<p class='lastTime'></p>");
            //infoP2.text(actList.ResultList.List[i].CTime);
            infoP2.text("2016-06-01");
            imgDiv.append(imgA.append(thumbImg));
            infoDiv.append(infoH.append(infoHA)).append(infoP1).append(infoP2);
            listDiv.append(imgDiv).append(infoDiv);
            $(".actList").append(listDiv);
          }
        }
      }

    });
  </script>
  <!--创建专辑界面-->
  <div class="row opeBox">
      <div class="col-sm-12">
          <div class="ibox float-e-margins">
              <div class="ibox-title">
                  <h5>创建专辑</h5>
                  <div class="ibox-tools">
                      <a class="close-link">
                          <i class="fa fa-times"></i>
                      </a>
                  </div>
              </div>
              <div class="ibox-content">
                  <form class="form-horizontal m-t" id="addZjForm" onsubmit="return false;">
                      <input id="UserId" name="UserId" class="form-control" type="hidden" value="123" />
                      <input id="MediaType" name="MediaType" class="form-control" type="hidden" value="wt_SeqMediaAsset" />
                      <div class="form-group">
                          <label class="col-sm-3 control-label">专辑名称：</label>
                          <div class="col-sm-8">
                              <input id="ContentName" name="ContentName" class="form-control" type="text" aria-required="true">
                          </div>
                      </div>
                      <div class="form-group">
                          <label class="col-sm-3 control-label">专辑封面：</label>
                          <div class="col-sm-8">
                              <div class="previewImg">
                                <img class="defaultImg" src="../uploadFiles/tempuplf/default.png" alt="front cover" />
                              </div>
                              <input id="uploadImg" name="uploadImg" class="form-control" type="file" accept=".png,.jpg" />
                              <input id="ContentImg" name="ContentImg" type="hidden" value="" />
                              <span class="help-block m-b-none"><i class="fa fa-info-circle"></i>文件最大1M，支持JPG、PNG格式</span>
                          </div>
                      </div>
                      <div class="form-group">
                          <label class="col-sm-3 control-label">专辑分类：</label>
                          <div class="col-sm-8">
                              <select class="form-control" name="ContentCatalogs" id="ContentCatalogs"></select>
                          </div>
                      </div>
                      <div class="form-group">
                          <label class="col-sm-3 control-label">专辑标签：</label>
                          <div class="col-sm-8">
                              <input id="SubjectWords" name="SubjectWords" class="form-control" type="text">
                          </div>
                      </div>
                      <div class="form-group">
                          <label class="col-sm-3 control-label">专辑简介：</label>
                          <div class="col-sm-8">
                              <textarea id="ContentDesc" name="ContentDesc" class="form-control"></textarea>
                          </div>
                      </div>
                      <!-- 
                      <div class="form-group">
                          <label class="col-sm-3 control-label">添加声音：</label>
                          <div class="col-sm-8">
                              <input id="contentUrl" name="contentUrl" class="form-control" type="file">
                          </div>
                      </div>
                       -->
                      
                      <div class="form-group">
                          <div class="col-sm-4 text-right">
                              <button class="btn btn-warning" id="submitBtn" type="submit">提交</button>
                          </div>
                          <div class="col-sm-4 text-center">
                              <button class="btn btn-warning" type="publish">发布</button>
                          </div>
                          <div class="col-sm-4 text-left">
                              <a class="close-link btn btn-warning">取消</a>
                          </div>
                      </div>
                  </form>
              </div>
          </div>
      </div>
  </div>
</body>
</html>