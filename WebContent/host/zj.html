<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>声音管理</title>
<meta name="keywords" content="">
<meta name="description" content="">
<link href="../resources/plugins/hplus/css/bootstrap.min.css"
  rel="stylesheet">
<link href="../resources/plugins/hplus/css/font-awesome.min.css"
  rel="stylesheet">
<link href="../resources/plugins/hplus/css/animate.min.css"
  rel="stylesheet">
<link href="../resources/plugins/hplus/css/style.min.css"
  rel="stylesheet">
<link href="../resources/css/host.css" rel="stylesheet">
</head>
<body>
  <div class="" style="padding:0 25px;">
    <!-- 操作和状态显示 -->
    <div class="" style="width:100%;height:70px;line-height:70px;">
      <p style="display:inline-block">共<spn class="totalCount"></spn>个专辑</p>
      <button class="btn btn-warning" style="display:inline;width:auto;height:30px;float:right;padding:2px 12px;margin:15px 8px;">创建专辑</button>
    </div>
    <!-- 列表显示区 -->
    <div class="actList"></div>
  </div>
  <!-- 全局js -->
  <script src="../resources/plugins/hplus/js/jquery-2.1.1.min.js"></script>
  <script src="../resources/plugins/hplus/js/bootstrap.min.js"></script>
  <!-- 自定义js -->
  <script src="../resources/plugins/hplus/js/content.min(1).js"></script>

  <script src="../resources/js/context.utils.js"></script>
  <script src="../resources/js/host.js"></script>
  <!-- jQuery Validation plugin javascript-->
  <script src="../resources/plugins/hplus/js/plugins/validate/jquery.validate.min.js"></script>
  <script>
    $(function(){
    	//获得父窗口window -> $(window.top) 或$(window.parent)  window可以省略
    	//获得父窗口document -> $(window.top.document)
    	//获取父窗口元素  ->$(window.top.document).find()
    	
      //获取列表
      dataParam={
    			"UserId":userId,
    			"url":"http://localhost:908/CM/content/seq/getHostSeqMediaList.do"
    	};
      getContentList(dataParam);
      
      //点击创建专辑按钮，弹出创建专辑界面
      $(".btn").on("click",function(){
    	  $(window.top.document).find(".shade,.opeBox").css({"display":"block"});
      })
      //对专辑的改、删等4种操作
      $(".actList").on("click","i",function(){
        switch($(this).attr("opeType")){
	        case 'conUpdate':
	        	//使用添加界面，对添加界面做相关调整
	        	/*
	        	1,界面文字修改
	        	2，元素VALUE获取
	        	3，存取元素值，和提交时的对比
	        	*/
	        	$(".btn").trigger("click");
	        	$(window.top.document).find(".opeBox").attr({"opeType":"conUpdate"}).find("h5").text("修改专辑");
	        	var contentId,contentName,contentDesc,contentImg,subjectWords,catalogsId;
	        	contentId=$(this).parents(".listBox").attr("contentId");
	        	contentName=$(this).parents(".listBox").attr("contentName");
	        	contentDesc=$(this).parents(".listBox").attr("ContentDesc");
	        	contentImg=$(this).parents(".listBox").attr("ContentImg");
	        	subjectWords=$(this).parents(".listBox").attr("SubjectWords");
	        	catalogsId=$(this).parents(".listBox").attr("ContentCatalogsId");
	        	var contentIdEle=$("<input id='ContentId' name='ContentId' class='form-control' type='hidden' value='' />");
	        	contentIdEle.val(contentId);
	        	getCatalogs(catalogsId);
	        	$(window.top.document).find("form").append(contentIdEle);
	        	$(window.top.document).find("#ContentName").val(contentName);
	        	$(window.top.document).find(".defaultImg").attr({"src":contentImg.slice(1)});
	        	$(window.top.document).find("#ContentImg").val(contentImg);
	        	$(window.top.document).find("#SubjectWords").val(subjectWords);
	        	$(window.top.document).find("#ContentDesc").val(contentDesc);
	        	break;
        	case 'conShare':
        		break;
          case 'conDel':
        	  dataParam={
        		  "UserId":userId,
        		  "ContentId":$(this).parents(".listBox").attr("contentId"),
        		  "url":"http://localhost:908/CM/content/seq/removeSeqMediaInfo.do",
        		  "opeType":$(this).attr("opeType")
        	 };
        	  getContentList(dataParam);
          	break;
          case 'subAdd':
          default:
        }
      });
    });
  </script>
</body>
</html>