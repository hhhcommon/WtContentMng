<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>节目管理(已发布--节目详情)</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="我听，我享听">                                                              
  <meta name="description" content="我听，我享听">
  <link href="../resources/plugins/hplus/css/bootstrap.min.css" rel="stylesheet">
  <link href="../resources/plugins/hplus/css/font-awesome.min.css" rel="stylesheet">
  <link href="../resources/plugins/hplus/css/animate.min.css" rel="stylesheet">
  <link href="../resources/plugins/hplus/css/style.min.css" rel="stylesheet">
  <script src="../resources/plugins/hplus/js/jquery-2.1.1.min.js"></script>
  <script src="../resources/js/context.utils.js"></script>
  
</head>
<style>
*{margin: 0;padding: 0;}
li{list-style: none;}
a,a:hover,a:link,a:focus,a:visited{text-decoration: none;}
::-webkit-scrollbar {height:12px;width:2px;background:#e7eaec; } 
::-webkit-scrollbar-thumb{height:12px;width:2px;background:#e7eaec;}
body{overflow: auto;background: #fff;}
.ellipsis {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}
.detail{
  width:1090px;
  min-width:850px;
  height:520px;
  margin:auto;
}
.detail_title{
  height: 30px;
  color: #000;
  font-size: 14px;
  margin-top: 20px;
  padding-left:20px;
  float: left;
}
.my_title{
  height: 30px;
  color: #000;
  line-height: 30px;
  font-size: 14px;
  font-weight: bold;
  margin: 80px 0px 0px 10px;
}
.detail_content{
  width:100%;
  height:570px;
  overflow: auto;
}
.dc_left1{
  width:710px;
  float: left;
}
.dc_left{
  position: relative;
  width:710px;
  height:calc(100% - 10px);
  float: left;
  margin-top:10px;
}
.dcl_jmcontent {
  width:100%;
  padding: 0px 0px 10px 20px;
  position: relative;
  border: 1px solid #dedede;
  overflow: hidden;
}
.dcl_jmcontent12{
  overflow: hidden;
  height: auto;
  padding-bottom: 20px;
}
.dcl_jmcontent1{
  float: left;
  width:180px;
  height:180px;
  position: absolute;
  margin-top:20px;
}
.dcl_jmcontent1 img{
  width:100%;
  height:100%;
  background-size:100% 100%;
  -ms-interpolation-mode:bicubic;  
}
.dcl_jmcontent2{
  float:right;
  overflow: hidden;
  width:calc(100% - 205px);
  height:auto;
  margin-top:20px;
}
.dcl_jmcontent2 h3{
  width:470px;
  display: inline-block;
  font-size: 20px;
  color:#000;
  font-family: "微软雅黑";
}
.h3span{
  color:#ffa634;
  font-size:14px;
  font-weight:100;
}
.dcl_jmcontent2 p{
  font-size:14px;
}
.dcl_jmcontent2 p span{
  font-size:15px;
  color:#000;
  font-family: "微软雅黑";
}
.dcl_jmcontent2 .category{
  color:#000;
  font-size:14px;
  font-weight:100;
  display: inline-block;
}
.dcl_jmcontent2 .comZj{
  color:#0077c7;
}
.tagss{
	overflow: hidden;
	position: relative;
}
.tagss span{
	float: left;
}
.dcl_jmcontent2 ul{
  overflow: hidden;
}
.dcl_jmcontent2 .act li{
  height: 27px;
  line-height: 27px;
  background: url("img/auto.png");
  background-position: 0 -118px;
  float: left;
  position: relative;
  margin:10px 8px 0px 0px;
  display: inline-block;
  cursor: pointer;
}
.dcl_jmcontent2 ul li span{
  background: url("img/auto.png");
  background-position:right -118px;
  padding-right:8px;
  display: inline-block;
  vertical-align: top !important;
  white-space: nowrap;
  color: #000;
}
.dcl_jmcontent3{
  overflow: hidden;
}
.dcl_jmcontent3 .revoke,.dcl_jmcontent3 .player{
	margin-right: 50px;
  width:85px;
  height:30px;
  color: #fff;
  cursor: pointer;
  margin-top:10px;
  text-align: center;
  line-height:30px;
  float: left;
}
.dcl_jmcontent3 .revoke{
	background: #0077c7;
}
.dcl_jmcontent3 .player{
	background: #f60;
}
.dcl_jmcontent4{
	font-family: "微软雅黑";
  color: #000;
  font-size: 16px;
  font-weight: 500;
  margin-top: 20px;
  line-height: 25px;
  float: left;
}
.dcl_jm_jmlist{
  width:100%;
  height:200px;
  position: absolute;
  float: left;
  margin-top:10px;
}
.list_title{
  height:30px;
  border-bottom:1px dotted #000;
  overflow: hidden;
}
.list_title h4{
  color:#000;
  float: left;
  padding-left:20px;
  height:30px;
  font-size:15px;
  line-height:30px;
}
.list_title span{
  color:#0071CE;
  float: right;
  height:30px;
  line-height:30px;
  font-size:15px;
  padding-right:10px;
  cursor: pointer;
}
.fl{
  float: left;
}
.list_content{
  height:360px;
  overflow-y: auto;
}
.list_content1{
  height:25px;
  line-height:25px;
  border-bottom:1px solid #676a6c;
  overflow: hidden;
}
.list_content1_a,.list_content1_span1,
.list_content1_span2,
.list_content1_span3,
.list_content1_img{
  float: left;
  width:auto;
  display: inline-block;
  font-size:12px;
  font-family: "微软雅黑";
}
.list_content1_a,.list_content1_a:hover{
  color: #000;
  font-family: "微软雅黑";
  padding-left:20px;
  width:290px;
}
.list_content1_img{
  background: url("img/btn.png") repeat;
  width: 25px;
  height: 25px;
  background-size: 100%;
  cursor: pointer;
  display: inline-block;
  overflow: hidden;
  background-position: 0px -154px;
  vertical-align: middle;
  user-select: none;
  -webkit-user-select: none;
  white-space: nowrap;
  margin-left: 150px;
}
.list_content1_span1{
  padding-left:0px;
}
.list_content1_span2,.list_content1_span3{
  margin-left:25px;
}
.dc_right1{
  width:300px;
  float: left;
  margin-left:36px;
}
.dc_right{
  width:300px;
  height:670px;
  overflow: auto;
}
.dcr_jmlist{
  overflow: auto;
}
.dcr_jmlist1{
  margin: 10px 10px 0px 10px;
  height: 100px;
  border-bottom: 2px solid #dedede;
}
.list1_img{
  width:80px;
  height:80px;
  float: left;
  display: inline-block;
  border:1px solid #dedede;
  cursor: pointer;
}
.list1_img img{
  width:100%;
  height:100%;
  background-size:100% 100%;
}
.list1_con{
  width:195px;
  float: left;
  padding-left:10px;
}
.list1_con_name{
	color: #000;
	font-weight: bold;
}
/*不通过样式*/
.nopass_masker{
  width:100%;
  position:fixed;
  top:0;
  left:0;
  background: #000;
  opacity: 0.5;
  display: none;
  z-index:100;
}
.nopass_container{
  width:575px;
  height:auto;
  position: fixed;
  top:20px;
  background: #fff;
  z-index:101;
  display: none;
  cursor: pointer;
}
.nopass_head{
  width:100%;
  height:40px;
  background:#DAE1EB;
  color:#000;
  font-weight:bolder;
  overflow: hidden;
}
.nh_span1{
  font-size:16px;
  float: left;
  margin: 9px 20px;
}
.nh_span2{
  font-size:20px;
  float: right;
  margin: 7px 20px;
}
.nopass_content{
  /*height: 440px;*/
}
.nc_con1{
  width:100%;
  height:75px;
  border-bottom:1px solid #dedede;
}
.nc_txt1{
  color:#007FFF;
  position: absolute;
  font-weight:bold;
  font-size: 15px;
  margin: 25px 0px 25px 20px;
}
.nc_con2{
  height:auto;
  font-size:14px;
  margin:30px 20px 0px 20px;
}
.black{
  color:#000;
}
.blue{
  color:#007FFF;
}
.nc_txt3{
  height:110px;
}
.nc_txt4{
  position: relative;
  top: 10px;
  float: left;
}
.other_reason{
  float: left;
}
.nc_con3{
  margin: 0px 20px 20px;
  overflow: hidden;
}
.nc_checkimg{
  width:18px;
  height:18px;
}
.nc_txt5{
  margin: 6px 20px 10px 340px;
}
.nc_txt6{
  margin-left: 10px;
  color: #000;
}
.nc_txt7{
  width:80px;
  height:30px;
  text-align: center;
  line-height: 30px;
  color:#000;
  background:#0077c7;
}

</style>
<body>
<div class="detail">
  <div class="containers">
    <div class="detail_content">
      <div class="dc_left1">
        <div class="detail_title">节目管理> 已发布> </div>
        <div class="dc_left">
          <div class="dcl_jmcontent">
            <div class="dcl_jmcontent12">
              <div class="dcl_jmcontent1">
                <img src="" alt="节目封面图片" />
              </div>
              <div class="dcl_jmcontent2">
                <div class="title">
                  <h3 class="ellipsis"></h3>
                </div>
                <p class="ctime">最近更新时间：<span class="cctime"></span></p>
                <p>来自专辑<span class="comZj"></span></p>
                <div class="tagss">
                  <span>标签：</span>
                  <ul class="tags">
                    <!--<li class="newli"><span class="newspan">自定义标签一</span></li>
                    <li class="newli"><span class="newspan">自定义标签一</span></li>
                    <li class="newli"><span class="newspan">自定义标签一</span></li>
                    <li class="newli"><span class="newspan">自定义标签一</span></li>
                    <li class="newli"><span class="newspan">自定义标签一</span></li>-->
                  </ul>
                </div>
                <ul class="act">
                  <li class="play">
                    <img class="play1" src="img/act1.png" alt="" />
                    <span class="play2"></span>
                  </li>
                  <li class="love">
                    <img class="love1" src="img/act3.png" alt="" />
                    <span class="love2"></span>
                  </li>
                  <li class="download">
                    <img class="download1" src="img/act4.png" alt="" />
                    <span class="download2"></span>
                  </li>
                  <li class="share">
                    <img class="share1" src="img/act2.png" alt="" />
                    <span class="share2"></span>
                  </li>
                  <li class="intransit">
                    <img class="intransit1" src="img/act5.png" alt="" />
                    <span class="intransit2"></span>
                  </li>
                </ul>
              </div>
            </div>
            <div class="dcl_jmcontent3">
          		<span class="revoke">撤回</span>
          		<span class="player">播放</span>
          	</div>
          	<div class="dcl_jmcontent4"></div>
          </div>
        </div>
      </div>
      <div class="dc_right1">
        <div class="my_title">同专辑的节目</div>
        <div class="dc_right">
          <div class="dcr_jmlist">
            <!--<div class="dcr_jmlist1">
              <div class="list1_img">
                <img src="" alt="节目图片" />
              </div>
              <div class="list1_con">
                <p class="list1_con_name">
                  <span>双份的阳光</span>
                </p>
                <p class="list1_con_num">
                  <span>播放次数 ： </span>
                  <span>8</span>
                </p>
                <p class="list1_con_time">
                  <span>时间 ：</span>
                  <span>2016-10-08 10:47:35</span>
                </p>
              </div>
            </div>-->
            <!--<div class="dcr_jmlist1">
              <div class="list1_img">
                <img src="" alt="节目图片" />
              </div>
              <div class="list1_con">
                <p class="list1_con_name">
                  <span>双份的阳光</span>
                </p>
                <p class="list1_con_num">
                  <span>播放次数 ： </span>
                  <span>8</span>
                </p>
                <p class="list1_con_time">
                  <span>时间 ：</span>
                  <span>2016-10-08 10:47:35</span>
                </p>
              </div>
            </div>-->
            <!--<div class="dcr_jmlist1">
              <div class="list1_img">
                <img src="" alt="节目图片" />
              </div>
              <div class="list1_con">
                <p class="list1_con_name">
                  <span>双份的阳光</span>
                </p>
                <p class="list1_con_num">
                  <span>播放次数 ： </span>
                  <span>8</span>
                </p>
                <p class="list1_con_time">
                  <span>时间 ：</span>
                  <span>2016-10-08 10:47:35</span>
                </p>
              </div>
            </div>-->
          </div> 
        </div>
      </div>
    </div>
  </div>
</div>
<!--s:不通过-->
<div class="nopass_masker"></div>
<div class="nopass_container">
  <div class="nopass_head">
    <span class="nh_span1">撤回</span>
    <span class="nh_span2">×</span>
  </div>
  <div class="nopass_content">
    <div class="nc_con1">
      <span class="nc_txt1">选择了2个节目，您确认撤回所选的节目么？</span>
    </div>
    <div class="nc_con2">
      <p class="nc_txt2 black">请告知主播具体的原因：</p>
      <p class="nc_txt2">广告信息及垃圾信息</p>
      <p class="nc_txt2">侵害他人名誉权、肖像权、知识产权、商业秘密等合法权利的内容</p>
      <p class="nc_txt2 blue">虚构事实。隐瞒真相以误导、欺骗他人</p>
      <p class="nc_txt2">违反国家法律、危害国家安全统一、社会稳定、公序良俗、社会公德以及侮辱、诽谤、黄色、暴力的内容</p>
      <div class="nc_txt3">
        <span class="nc_txt4">其他原因：</span>
        <textarea name="" rows="4" cols="62" class="other_reason"></textarea>
      </div>
    </div>
    <div class="nc_con3">
      <div class="nc_txt5 fl">
        <img src="img/checkbox1.png" alt="勾选" class="nc_checkimg fl"/>
        <span class="nc_txt6 fl">违规登记</span>
      </div>
      <div class="nc_txt7 fl">确定</div>
    </div>
  </div>
</div>
<!--e:不通过-->  
</body>
<script>
  var rootPath=getRootPath();
  function getUrlParam(name) {
    var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
    var r = window.location.search.substr(1).match(reg);  //匹配目标参数
    if (r != null) return unescape(r[2]); //返回参数值
  }
  var seqId=getUrlParam('seqId');
  var contentId=getUrlParam('contentId');
  var data1={"UserId":"123",
             "ContentFlowFlag":"2",
             "Page":"1",
             "PageSize":"10",
             "ContentId":contentId,
             "MediaType":"wt_MediaAsset"
  };
  /*得到节目信息*/
  getZjDetail(data1);
  function getZjDetail(dataParam){
    $.ajax({
      type:"POST",
      url:rootPath+"CM/content/getContentInfo.do",
      dataType:"json",
      data:JSON.stringify(dataParam),
      success:function(resultData){
        if(resultData.ReturnType == "1001"){
          if(dataParam.MediaType=="wt_MediaAsset"){
            fillJmDetail(resultData);//填充节目数据
          }else{
            fillJmList(resultData);//填充专辑下的节目列表
          }
        }else{
          alert(resultData.Message);
        }
      },
      error:function(XHR){
        alert("发生错误："+ jqXHR.status);
      }
    });
  }
  //填充节目数据
  function fillJmDetail(resultData){
    $(".detail_title").html("节目管理> 已发布> "+resultData.ContentDetail.ContentName);
    $(".dcl_jmcontent2 .title h3").html(resultData.ContentDetail.ContentName);
    $(".dcl_jmcontent1 img").attr("src",resultData.ContentDetail.ContentImg);
    $(".cctime").html(resultData.ContentDetail.CTime);
    $(".comZj").html(!resultData.ContentDetail.ContentSeqName?"【自定义专辑】":"【"+(resultData.ContentDetail.ContentSeqName)+"】");
    if(resultData.ContentDetail.ContentCatalogs!=null){
      for(var i=0;i<resultData.ContentDetail.ContentCatalogs.length;i++){
        var li='<li class="newli"><span class="newspan" catalogId='+resultData.ContentDetail.ContentCatalogs[i].CataDid+'>'+resultData.ContentDetail.ContentCatalogs[i].CataTitle+'</span></li>';
        $(".tags").append(li);
      }
    }
    $(".play2").html(!resultData.ContentDetail.PlayCount?"播放":(resultData.ContentDetail.PlayCount));
    $(".love2").html(!resultData.ContentDetail.LoveCount?"喜欢":(resultData.ContentDetail.LoveCount));
    $(".download2").html(!resultData.ContentDetail.DownloadCount?"下载":(resultData.ContentDetail.DownloadCount));
    $(".share2").html(!resultData.ContentDetail.ShareCount?"分享":(resultData.ContentDetail.ShareCount));
    $(".intransit2").html(!resultData.ContentDetail.IntransitCount?"转发":(resultData.ContentDetail.IntransitCount));
    $(".dcl_jmcontent4").html(resultData.ContentDetail.ContentDesc);
  }
  /*同专辑下的所有节目*/
  var data2={"UserId":"123",
             "ContentFlowFlag":"2",
             "Page":"1",
             "PageSize":"10",
             "ContentId":seqId,
             "MediaType":"wt_SeqMediaAsset"
  };
  getZjDetail(data2);
  //填充专辑下的节目列表
  function fillJmList(resultData){
    for(var i=0;i<resultData.SubList.length;i++){
      var list= '<div class="dcr_jmlist1">'+
                  '<div class="list1_img">'+
                    '<img src='+resultData.SubList[i].ContentImg+' alt="节目图片" />'+
                  '</div>'+
                  '<div class="list1_con">'+
                    '<p class="list1_con_name ellipsis">'+
                      '<span>'+resultData.SubList[i].ContentName+'</span>'+
                    '</p>'+
                    '<p class="list1_con_num">'+
                      '<span>播放次数 ： </span>'+
                      '<span>'+resultData.SubList[i].PlayCount+'</span>'+
                    '</p>'+
                    '<p class="list1_con_time">'+
                      '<span>时间 ：</span>'+
                      '<span>'+resultData.SubList[i].CTime+'</span>'+
                    '</p>'+
                  '</div>'+
                '</div>';
      $(".dcr_jmlist").append(list);
    }
  }
</script>
</html>