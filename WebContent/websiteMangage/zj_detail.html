<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>专辑管理(已发布--专辑详情)</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="我听，我享听">                                                              
  <meta name="description" content="我听，我享听">
  <link href="../resources/plugins/hplus/css/bootstrap.min.css" rel="stylesheet">
  <link href="../resources/plugins/hplus/css/font-awesome.min.css" rel="stylesheet">
  <link href="../resources/plugins/hplus/css/animate.min.css" rel="stylesheet">
  <link href="../resources/plugins/hplus/css/style.min.css" rel="stylesheet">
  <link href="css/globalplayer.css" rel="stylesheet">
  <script src="../resources/plugins/hplus/js/jquery-2.1.1.min.js"></script>
  <script src="../resources/plugins/hplus/js/bootstrap.min.js"></script>
  <script src="../resources/js/common.utils.js"></script>
  <script src="../resources/js/context.utils.js"></script>
  <script src="js/globalplayer.js"></script>
</head>
<style>
*{margin: 0;padding: 0;}
li{list-style: none;}
a,a:hover,a:link,a:focus,a:visited{text-decoration: none;}
::-webkit-scrollbar {height:12px;width:2px;background:#e7eaec; } 
::-webkit-scrollbar-thumb{height:12px;width:2px;background:#e7eaec;}
body{overflow: auto;background: #fff;-moz-user-select: none;}
.detail{
  width:1090px;
  min-width:850px;
  height:520px;
  margin:auto;
}
.detail_title{
  height: 30px;
  color: #000;
  font-size: 14px;
  margin-top: 20px;
  padding-left:20px;
  float: left;
}
.my_title{
  height: 30px;
  color: #000;
  line-height: 30px;
  font-size: 14px;
  font-weight: bold;
  margin: 80px 0px 0px 10px;
}
.detail_content{
  width:100%;
  height:570px;
  overflow: auto;
}
.dc_left1{
  width:710px;
  float: left;
}
.dc_left{
  position: relative;
  width:710px;
  height:calc(100% - 10px);
  float: left;
  margin:10px 0px 0px 20px;
}
.dcl_zjcontent {
  width:100%;
  padding: 0px 0px 10px 20px;
  position: relative;
  border: 1px solid #dedede;
  overflow: hidden;
}
.dcl_zjcontent12{
  overflow: hidden;
  height: auto;
  margin-bottom: 20px;
}
.dcl_zjcontent1{
  float: left;
  width:180px;
  height:180px;
  position: relative;
  margin-top:20px;
}
.dcl_zjcontent1 img{
  width:100%;
  height:100%;
  background-size:100% 100%;
  -ms-interpolation-mode:bicubic;  
}
.tagss{
  overflow: hidden;
  position: relative;
}
.tagss span{
  float: left;
}
.dcl_zjcontent2{
  float:right;
  overflow: hidden;
  width:calc(100% - 205px);
  height:auto;
  margin-top:20px;
}
.dcl_zjcontent2 h3{
  width:auto;
  display: inline-block;
  font-size: 20px;
  color:#000;
  font-family: "微软雅黑";
}
.h3span{
  color:#ffa634;
  font-size:14px;
  font-weight:100;
}
.dcl_zjcontent2 p{
  font-size:14px;
}
.dcl_zjcontent2 p span{
  font-size:15px;
  color:#000;
  font-weight: 800;
  font-family: "微软雅黑";
}
.dcl_zjcontent2 .cctime{
  font-weight:normal;
  color: #676a6c;
}
.dcl_zjcontent2 ul{
  overflow: hidden;
  margin-bottom:0px;
}
.dcl_zjcontent2 ul li{
  height: 27px;
  background: url("img/auto.png");
  background-position: 0 -118px;
  float: left;
  position: relative;
  display: inline-block;
  cursor: pointer;
}
.dcl_zjcontent2 ul li span{
  background: url("img/auto.png");
  background-position:right -118px;
  padding-right:8px;
  display: inline-block;
  vertical-align: top !important;
  white-space: nowrap;
}
.dcl_zjcontent3{
  overflow: hidden;
}
.dcl_zjcontent3 .revoke,.dcl_zjcontent3 .player{
  margin-right: 50px;
  width:85px;
  height:30px;
  color: #fff;
  cursor: pointer;
  text-align: center;
  line-height:30px;
  float: left;
}
.fl{
  float: left;
}
.dcl_zjcontent3 .revoke{
  background: #0077c7;
}
.dcl_zjcontent3 .player{
  background: #f60;
}
.play_sum{
  width: 130px;
  height: 30px;
  line-height: 30px;
}
.play_sum1{
  color:#0077c7;
  font-size:25px;
}
.play_sum2{
  color: #000;
  font-size: 16px;
  margin-left: 20px;
}
.dcl_zjcontent4{
  font-family: "微软雅黑";
  color: #000;
  font-size: 16px;
  font-weight: 500;
  margin-top: 20px;
  line-height: 25px;
  float: left;
}
.dcl_zj_jmlist{
  width:100%;
  height:auto;
  position: absolute;
  float: left;
  margin-top:10px;
}
.list_title{
  height:32px;
  border-bottom:1px dotted #000;
}
.content-tabs{
  height: 30px;
  background: #fff;
  border-bottom: solid 0px #f3f3f4;
}
.content-tabs button:hover {
  background: #fff;
}
.list_title h4{
  color:#000;
  float: left;
  padding-left:20px;
  height:32px;
  font-size:15px;
  margin-top:0px;
  line-height:32px;
}
.list_title_span{
  color: #000;
  font-weight: bolder;
  float: right;
  height:30px;
  line-height:30px;
  font-size:15px;
  padding-right:10px;
  cursor: pointer;
}
.jm_states{
  float: right;
  width: 135px;
  font-weight: bolder;
  color: #000;
  font-size: 15px;
}
.zj_jmlist {
  width: 100%;
  position: absolute;
  height: 200px;
  border: 1px solid #00458A;
}
.list_content{
  width:100%;
  height:360px;
  overflow-y: auto;
  position: absolute;
}
.list_content1{
  height:30px;
  line-height:30px;
  border-bottom:1px solid #676a6c;
  overflow: hidden;
}
.list_content1_div {
  width: 290px;
  overflow: hidden;
}
.list_content1_play{
  background: url("img/btn.png") repeat;
  background-position: 0px -154px;
  width: 25px;
  height: 25px;
  margin-top:3px;
  background-size: 100%;
  cursor: pointer;
  display: inline-block;
  overflow: hidden;
  background-position: 0px -154px;
  vertical-align: middle;
  user-select: none;
  -webkit-user-select: none;
  white-space: nowrap;
}
.act{
  width:280px;
  overflow: hidden;
}
.act li{
  margin-left:20px;
}
.playcount{
  position: absolute;
}
.list_content1_span1{
  padding-left:0px;
}
.list_content1_span2,.list_content1_span3{
  margin-left:25px;
}
.dc_right1{
  width:300px;
  float: left;
  margin-left:36px;
}
.dc_right{
  width:300px;
  height:670px;
  overflow: auto;
}
.dcr_zjlist{
  overflow: auto;
}
.dcr_zjlist1{
  margin: 10px 10px 0px 10px;
  height: 100px;
  border-bottom: 2px solid #dedede;
}
.list1_img{
  width:80px;
  height:80px;
  float: left;
  display: inline-block;
  border:1px solid #dedede;
  cursor: pointer;
}
.list_content{
  width:100%;
  height:360px;
  overflow-y: auto;
}
.list_content1{
  height:30px;
  border-bottom:1px solid #676a6c;
  overflow: hidden;
}
.playcount{
  position: absolute;
}
.list_content1_span1{
  padding-left:0px;
}
.list_content1_a{
  font-size:15px;
  color: #0077c7;
  width:240px;
  cursor: pointer;
}
.list_content1_span2,.list_content1_span3{
  margin-left:25px;
}
.list1_img img{
  width:100%;
  height:100%;
  background-size:100% 100%;
}
.list1_con{
  width:195px;
  float: left;
  padding-left:10px;
}
.list_time{
  width: 120px;
  text-align: right;
  margin-left: 10px;
}
.zjname{
  margin-bottom: -4px;
  width: 113px;
  display: inline-block;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.rtc_listBox{
  width:97%;
  height:110px;
  border-bottom:1px solid #dedede;
  position:relative;
  font-family: "微软雅黑";
  font-size:14px ;
  overflow: hidden;
}
.rtcl_img{
  height:80px;
  width:80px;
  margin-top:15px;
  margin-left:20px;
  margin-right:10px;
  border:1px solid #dedede;
  float: left;
  cursor: pointer;
}
.rtcl_img img{
  width:100%;
  height:100%;
  background-size:100% 100%;
}
.rtcl_con{
  height:100%;
  float: left;
  color:rgb(173,172,172);
}
.rtcl_con h4{
  margin-top:20px;
  color:#000;
}
.jm_st{
  float: right;
  line-height: 110px;
  margin-right:104px;
  color:#000;
}
.op_type{
  float: right;
  margin-right:-140px;
}
.op_type p{
  cursor: pointer;
  margin:5px 0px 0px 0px;
}
.cf60{
 color:#f60; 
}
.c173{
  color:rgb(173,172,172);
}
.dropdown-menu{
  left:15px;
  min-width:110px !important;
}
/*不通过样式*/
.nopass_masker{
  width:100%;
  position:fixed;
  top:0;
  left:0;
  background: #000;
  opacity: 0.5;
  display: none;
  z-index:100;
}
.nopass_container{
  width:575px;
  height:auto;
  position: fixed;
  top:20px;
  background: #fff;
  z-index:101;
  display: none;
  cursor: pointer;
}
.nopass_head{
  width:100%;
  height:40px;
  background:#DAE1EB;
  color:#000;
  font-weight:bolder;
  overflow: hidden;
}
.nh_span1{
  font-size:16px;
  float: left;
  margin: 9px 20px;
}
.nh_span2{
  font-size:20px;
  float: right;
  margin: 7px 20px;
}
.nopass_content{
  /*height: 440px;*/
}
.nc_con1{
  width:100%;
  height:75px;
  border-bottom:1px solid #dedede;
}
.nc_txt1{
  color:#007FFF;
  position: absolute;
  font-weight:bold;
  font-size: 15px;
  margin: 25px 0px 25px 20px;
}
.nc_con2{
  height:auto;
  font-size:14px;
  margin:30px 20px 0px 20px;
}
.black{
  color:#000;
}
.blue{
  color:#007FFF;
}
.nc_txt3{
  height:110px;
}
.nc_txt4{
  position: relative;
  top: 10px;
  float: left;
}
.other_reason{
  float: left;
}
.nc_con3{
  margin: 0px 20px 20px;
  overflow: hidden;
}
.nc_checkimg{
  width:18px;
  height:18px;
}
.nc_txt5{
  margin: 6px 20px 10px 340px;
}
.nc_txt6{
  margin-left: 10px;
  color: #000;
}
.nc_txt7{
  width:80px;
  height:30px;
  text-align: center;
  line-height: 30px;
  color:#000;
  background:#0077c7;
}
.formChannel{
  font-size: 15px;
  color: #000;
  font-weight: 800;
  font-family: "微软雅黑";
}
.ctime{
  margin-top:8px;
}
.list1_con_name,.list1_con_num,.list1_con_time{
  width: 180px;
}
.ellipsis{
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}
.no{
  height: 100px;
  text-align: center;
  border: 1px solid #dedede;
  font-size: 16px;
  line-height: 100px;
}
</style>
<body onselectstart="return false">
<div class="detail">
  <div class="containers">
    <div class="detail_content">
      <div class="dc_left1">
        <div class="detail_title">节目管理> 已发布> </div>
        <div class="dc_left">
          <div class="dcl_zjcontent">
            <div class="dcl_zjcontent12">
              <div class="dcl_zjcontent1">
                <img src="" alt="节目封面图片" />
              </div>
              <div class="dcl_zjcontent2">
                <div class="title">
                  <h3 class="ellipsis"></h3>
                </div>
                <ul class="persons">
                  <span class="fl">主播：</span>
                  <!--<li class="perName fl"></li>-->
                </ul>
                <ul class="channels">
                  <span class="fl">来自栏目:</span>
                  <!--<li class="formChannel fl"></li>
                  <li class="formChannel fl"></li>-->
                </ul>
                <div class="tagss">
                  <span>标签：</span>
                  <ul class="tags">
                    <!--<li class="newli"><span class="newspan">自定义标签一</span></li>
                    <li class="newli"><span class="newspan">自定义标签一</span></li>
                    <li class="newli"><span class="newspan">自定义标签一</span></li>
                    <li class="newli"><span class="newspan">自定义标签一</span></li>
                    <li class="newli"><span class="newspan">自定义标签一</span></li>-->
                  </ul>
                </div>
                <p class="ctime">最近更新时间：<span class="cctime"></span></p>
              </div>
            </div>
            <div class="dcl_zjcontent3">
              <span class="revoke fl">撤回专辑</span>
              <span class="player fl">全部播放</span>
              <div class="play_sum fl"><span class="play_sum1"></span><span class="play_sum2">次播放</span></div>
            </div>
            <div class="dcl_zjcontent4"></div>
          </div>
          <div class="dcl_zj_jmlist">
            <div class="list_title">
              <h4></h4>
              <span class="list_title_span">更改排序</span>
            </div>
            <ul class="list_content">
              <!--<li class="list_content1">
                <div class="fl list_content1_div">
                  <span alt="播放按钮图片" class="list_content1_play fl"/></span>
                  <span class="list_content1_a fl">vol.23 想和你一起去看海</span>
                </div>
                <ul class="act fl">
                  <li class="play fl">
                    <img class="play1" src="img/act1.png" alt="" />
                    <span class="play2">播放(0)</span>
                  </li>
                  <li class="love fl">
                    <img class="love1" src="img/act3.png" alt="" />
                    <span class="love2">喜欢(0)</span>
                  </li>
                  <li class="intransit fl">
                    <img class="intransit1" src="img/act5.png" alt="" />
                    <span class="intransit2">转发(0)</span>
                  </li>
                </ul>
                <span class="list_time fl">2016-10-18</span>
              </li>
              <li class="list_content1">
                <div class="fl list_content1_div">
                  <span alt="播放按钮图片" class="list_content1_play fl"/></span>
                  <span class="list_content1_a fl">vol.23 想和你一起去看海</span>
                </div>
                <ul class="act fl">
                  <li class="play fl">
                    <img class="play1" src="img/act1.png" alt="" />
                    <span class="play2">播放(0)</span>
                  </li>
                  <li class="love fl">
                    <img class="love1" src="img/act3.png" alt="" />
                    <span class="love2">喜欢(0)</span>
                  </li>
                  <li class="intransit fl">
                    <img class="intransit1" src="img/act5.png" alt="" />
                    <span class="intransit2">转发(0)</span>
                  </li>
                </ul>
                <span class="list_time fl">2016-10-18</span>
              </li>
              <li class="list_content1">
                <div class="fl list_content1_div">
                  <span alt="播放按钮图片" class="list_content1_play fl"/></span>
                  <span class="list_content1_a fl">vol.23 想和你一起去看海</span>
                </div>
                <ul class="act fl">
                  <li class="play fl">
                    <img class="play1" src="img/act1.png" alt="" />
                    <span class="play2">播放(0)</span>
                  </li>
                  <li class="love fl">
                    <img class="love1" src="img/act3.png" alt="" />
                    <span class="love2">喜欢(0)</span>
                  </li>
                  <li class="intransit fl">
                    <img class="intransit1" src="img/act5.png" alt="" />
                    <span class="intransit2">转发(0)</span>
                  </li>
                </ul>
                <span class="list_time fl">2016-10-18</span>
              </li>-->
            </ul>
          </div>
        </div>
      </div>
      <div class="dc_right1">
        <div class="my_title">同主播的专辑</div>
        <div class="dc_right">
          <div class="dcr_zjlist">
            <!--<div class="dcr_zjlist1">
              <div class="list1_img">
                <img src="" alt="节目图片" />
              </div>
              <div class="list1_con">
                <p class="list1_con_name">
                  <span>双份的阳光</span>
                </p>
                <p class="list1_con_num">
                  <span>集数 ： </span>
                  <span>8</span>
                </p>
                <p class="list1_con_time">
                  <span>时间 ：</span>
                  <span>2016-10-08 10:47:35</span>
                </p>
              </div>
            </div>-->
            <!--<div class="dcr_zjlist1">
              <div class="list1_img">
                <img src="" alt="节目图片" />
              </div>
              <div class="list1_con">
                <p class="list1_con_name">
                  <span>双份的阳光</span>
                </p>
                <p class="list1_con_num">
                  <span>集数 ： </span>
                  <span>8</span>
                </p>
                <p class="list1_con_time">
                  <span>时间 ：</span>
                  <span>2016-10-08 10:47:35</span>
                </p>
              </div>
            </div>-->
            <!--<div class="dcr_zjlist1">
              <div class="list1_img">
                <img src="" alt="节目图片" />
              </div>
              <div class="list1_con">
                <p class="list1_con_name">
                  <span>双份的阳光</span>
                </p>
                <p class="list1_con_num">
                  <span>集数 ： </span>
                  <span>8</span>
                </p>
                <p class="list1_con_time">
                  <span>时间 ：</span>
                  <span>2016-10-08 10:47:35</span>
                </p>
              </div>
            </div>-->
          </div> 
        </div>
      </div>
    </div>
  </div>
  <!--s:全局播放器-->
  <div class="globalplayer">
    <audio src="" class="audio" controls style="display: none;"></audio>
    <!--s:收起状态-->
    <div class="glp_mini">
      <img class="sound_face" src="img/launch.png">
    </div>
    <!--e:收起状态-->
    <!--s:展开状态-->
    <div class="glp_block">
      <div class="glp_panel">
        <div class="controls">
          <img class="btn_prev prevBtn" src="img/prev.png" alt="前一首" />
          <img class="btn_player playerBtn" src="img/play.png" alt="播放/暂停" />
          <img class="btn_next nextBtn" src="img/next.png" alt="后一首" />
        </div>
        <div class="player_panel">
          <a href="#" class="title" title=""></a>
          <div>
            <span class="time sound_position">00:00</span>
            <div class="player_progressbar">
              <div class="player_playbar"></div>
              <div class="player_circle"></div>  
            </div>
            <span class="time sound_duration"></span>
          </div>
        </div>
        <div class="volume_panel">
          <img src="img/volume.png" alt="音量图标" class="volume_img no_mute"/>
          <div class="volume_progressbar">
            <div class="volume_playbar"></div>
            <div class="volume_circle"></div> 
          </div>
        </div>
        <img src="img/fold.png" alt="折叠面板" class="fold_panel_img"/>
      </div>
    </div>
    <!--e:展开状态-->
  </div>
  <!--e:全局播放器-->
</div>
<!--s:不通过-->
<div class="nopass_masker"></div>
<div class="nopass_container">
  <div class="nopass_head">
    <span class="nh_span1">撤回</span>
    <span class="nh_span2">×</span>
  </div>
  <div class="nopass_content">
    <div class="nc_con1">
      <span class="nc_txt1">选择了2个节目，您确认撤回所选的节目么？</span>
    </div>
    <div class="nc_con2">
      <p class="nc_txt2 black">请告知主播具体的原因：</p>
      <p class="nc_txt2">广告信息及垃圾信息</p>
      <p class="nc_txt2">侵害他人名誉权、肖像权、知识产权、商业秘密等合法权利的内容</p>
      <p class="nc_txt2 blue">虚构事实。隐瞒真相以误导、欺骗他人</p>
      <p class="nc_txt2">违反国家法律、危害国家安全统一、社会稳定、公序良俗、社会公德以及侮辱、诽谤、黄色、暴力的内容</p>
      <div class="nc_txt3">
        <span class="nc_txt4">其他原因：</span>
        <textarea name="" rows="4" cols="62" class="other_reason"></textarea>
      </div>
    </div>
    <div class="nc_con3">
      <div class="nc_txt5 fl">
        <img src="img/checkbox1.png" alt="勾选" class="nc_checkimg fl"/>
        <span class="nc_txt6 fl">违规登记</span>
      </div>
      <div class="nc_txt7 fl">确定</div>
    </div>
  </div>
</div>
<!--e:不通过-->  
</body>
<script>
$(function(){
  var contentId=getUrlParam(window.location.href,'contentId');
  var rootPath=getRootPath();
  var mp3List=[];//音乐播放列表
  var listNum=0;//控制播放节目的序号
  var perid="";//主播id
  
  var data1={"UserId":"123",
             "ContentFlowFlag":"2",
             "Page":"1",
             "PageSize":"10",
             "ContentId":contentId,
             "MediaType":"wt_SeqMediaAsset"
  };
  /*得到专辑信息*/
  getZjDetail(data1);
  function getZjDetail(dataParam){
    $.ajax({
      type:"POST",
      url:rootPath+"CM/content/getContentInfo.do",
      dataType:"json",
      async:false,
      data:JSON.stringify(dataParam),
      success:function(resultData){
        if(resultData.ReturnType == "1001"){
          fillZjDetail(resultData);//填充专辑数据
        }else{
          alert(resultData.Message);
        }
      },
      error:function(XHR){
        alert("发生错误："+ jqXHR.status);
      }
    });
  }
  //填充专辑数据
  function fillZjDetail(resultData){
    $(".detail_title").html("节目管理> 已发布> 【"+resultData.ContentDetail.ContentName+"】");
    $(".dcl_zjcontent2 .title h3").html("【"+resultData.ContentDetail.ContentName+"】全集");
    $(".dcl_zjcontent1 img").attr("src",resultData.ContentDetail.ContentImg);
    if(resultData.ContentDetail.ContentPersons){
      for(var i=0;i<resultData.ContentDetail.ContentPersons.length;i++){
        var pName=resultData.ContentDetail.ContentPersons[i].PerName;
        var li='<li class="perName fl" personId='+resultData.ContentDetail.ContentPersons[i].PerId+'>'+(!pName?"暂无":pName)+'</li>';
        $(".persons").append(li);
        if(perid==""){
          perid=resultData.ContentDetail.ContentPersons[i].PerId;
        }else{
          perid+=","+resultData.ContentDetail.ContentPersons[i].PerId;
        }
      }
      console.log("perid---"+perid);
      $(".persons").attr("perId",perid);
    }
    if(resultData.ContentDetail.ContentPubChannels){
      for(var i=0;i<resultData.ContentDetail.ContentPubChannels.length;i++){
        var channelName=resultData.ContentDetail.ContentPubChannels[i].ChannelName;
        var li='<li class="formChannel fl" channelId='+resultData.ContentDetail.ContentPubChannels[i].ChannelId+'>【'+(!channelName?"暂无":channelName)+'】</li>';
        $(".channels").append(li);
      }
    }
    if(resultData.ContentDetail.ContentKeyWord){
      for(var i=0;i<resultData.ContentDetail.ContentKeyWord.length;i++){
        var li='<li class="newspan fl" tagId='+resultData.ContentDetail.ContentKeyWord[i].TagId+'>'+resultData.ContentDetail.ContentKeyWord[i].TagName+'</li>';
        $(".tags").append(li);
      }
    }
    $(".cctime").html(resultData.ContentDetail.ContentPubTime);
    $(".play_sum1").html(resultData.ContentDetail.PlayCount);
    $(".dcl_zjcontent4").html(resultData.ContentDetail.ContentDesc);
    if(resultData.SubList){
      $(".list_title h4").html("共"+resultData.SubList.length+"集");
      for(var i=0;i<resultData.SubList.length;i++){
        var li='<li class="list_content1" conId='+resultData.SubList[i].ContentId+'>'+
                  '<div class="fl list_content1_div">'+
                    '<span alt="播放按钮图片" class="list_content1_play fl" playUrl='+resultData.SubList[i].ContentPlay+'/></span>'+
                    '<span class="list_content1_a fl ellipsis">'+resultData.SubList[i].ContentName+'</span>'+
                  '</div>'+
                  '<ul class="act fl">'+
                    '<li class="play fl">'+
                      '<img class="play1" src="img/act1.png" alt="" />'+
                      '<span class="play2">'+resultData.SubList[i].PlayCount+'</span>'+
                    '</li>'+
                    '<li class="love fl">'+
                      '<img class="love1" src="img/act3.png" alt="" />'+
                      '<span class="love2">喜欢(0)</span>'+
                    '</li>'+
                    '<li class="intransit fl">'+
                      '<img class="intransit1" src="img/act5.png" alt="" />'+
                      '<span class="intransit2">转发(0)</span>'+
                    '</li>'+
                  '</ul>'+
                  '<span class="list_time fl">'+resultData.SubList[i].CTime+'</span>'+
                '</li>';
        $(".list_content").append(li);
        var audioObj={};
        audioObj.title=resultData.SubList[i].ContentName;
        audioObj.playUrl=resultData.SubList[i].ContentPlay;
        mp3List.push(audioObj);
      }
      $(".audio").attr({"src":""});
      $(".player_panel .title").html("");
      $(".player_panel .title").html(mp3List[0].title);
      $(".audio").attr("src",mp3List[0].playUrl);
      getTime();
    }else{
      $(".list_title h4").html("共0集");
    }
  }
  /*获取同主播的专辑列表*/
  var data3={"UserId":"123",
             "PersonId":perid,
             "Page":"1",
             "PageSize":"10",
             "MediaType":"SEQU"
  };
  getZjList(data3);
  function getZjList(dataParam){
    $.ajax({
      type:"POST",
      url:rootPath+"CM/person/getPersonContents.do",
      dataType:"json",
      async:false,
      data:JSON.stringify(dataParam),
      success:function(resultData){
        if(resultData.ReturnType=="1001"){
          fillZjList(resultData);//填充专辑列表数据
        }else{
          $(".dcr_zjlist").html("<div class='no'>暂无其他专辑</div>");
        }
      },
      error:function(XHR){
        alert("发生错误："+ jqXHR.status);
      }
    });
  }
  function fillZjList(resultData){//填充专辑列表数据
    for(var i=0;i<resultData.ResultInfo.List.length;i++){
      var ctime=resultData.ResultInfo.List[i].CTime;
      ctime=new Date(parseInt(ctime)).toLocaleString('chinese',{hour12:false}).replace(/\//g, "-");  
      var li= '<div class="dcr_zjlist1" contentId='+resultData.ResultInfo.List[i].ContentId+'>'+
                '<div class="list1_img">'+
                  '<img src='+resultData.ResultInfo.List[i].ContentImg+' alt="节目图片" />'+
                '</div>'+
                '<div class="list1_con">'+
                  '<p class="list1_con_name ellipsis">'+
                    '<span>'+resultData.ResultInfo.List[i].ContentName+'</span>'+
                  '</p>'+
                  '<p class="list1_con_num ellipsis">'+
                    '<span>集数: </span>'+
                    '<span>'+resultData.ResultInfo.List[i].MediaSize+'</span>'+
                  '</p>'+
                  '<p class="list1_con_time ellipsis">'+
                    '<span>时间 :</span>'+
                    '<span class="ctime">'+ctime+'</span>'+
                  '</p>'+
                '</div>'+
              '</div>';
      $(".dcr_zjlist").append(li);  
    }
  }
 
  /*s--播放*/
  /*点击全部播放*/
  $(".player").on("click",function(){
    $(".audio").attr({"src":mp3List[0].playUrl});
    $(".player_panel .title").html(mp3List[0].title);
    $(".audio")[0].play();
  });
  /*全局播放器面板的展开*/
  $(".glp_mini").on("click",function(){
    $(this).css({"left":'-60px',"transition" :"all 0.1s ease 0s"});
    $(this).siblings(".glp_block").css({"left":'0px',"transition" :"all 0.1s ease 0s"});
  });
  /*实时获取播放时长和改变进度条进度*/
  $(".audio")[0].addEventListener("timeupdate",function(){
    if(!isNaN(this.duration)){
      //播放进度条
      var progressValue = this.currentTime/this.duration*($(".player_progressbar").width());
      $('.player_circle')[0].style.left = parseInt(progressValue) + 'px';
      $(".player_playbar").css("width",progressValue+"px");
      //播放时长
      if(formatTime(Math.floor(this.currentTime))!=0){
        $(".sound_position").text(formatTime(Math.floor(this.currentTime)));
      }
    };
  },false);
  /*监控audio是否播放完毕,播放完毕后自动播放下一首*/
  $(".audio")[0].addEventListener("ended",function(){ 
    $(".nextBtn").click();
  },false);
  /*实现播放快进和后退*/
  $(".player_progressbar").on("click",function(event){
    var e = event || window.event;
    var scrollX = document.documentElement.scrollLeft || document.body.scrollLeft;
    var x = e.pageX || e.clientX + scrollX;
    var pleft=x-335;
    var clickPlayTime=pleft*($(".audio")[0].duration)/$(".player_progressbar").width();
    $('.player_circle')[0].style.left = parseInt(pleft) + 'px';
    $(".player_playbar").css("width",pleft+"px");
    $('.audio')[0].currentTime=clickPlayTime;
    $(".sound_position").text(formatTime(Math.floor(clickPlayTime)));
  });
  /*实现静音*/
  var clickVolume="1";//音量大小
  var volumeLeft=" ";//音量的小圆点距离左边的距离
  $(".volume_img").on("click",function(event){
    if($(this).hasClass("no_mute")){
      $(this).removeClass("no_mute").attr("src","img/mute.png");
      $('.audio')[0].volume="0";
      $('.volume_circle')[0].style.left ='0px';
      $(".volume_playbar").css("width","0px");
    }else{
      $(this).addClass("no_mute").attr("src","img/volume.png");
      $('.volume_circle')[0].style.left = parseInt(volumeLeft) + 'px';
      $(".volume_playbar").css("width",volumeLeft+"px");
      $('.audio')[0].volume=clickVolume;
    }
  });
  /*实现音量的增大和减小*/
  $(".volume_progressbar").on("click",function(event){
    var e = event || window.event;
    var scrollX = document.documentElement.scrollLeft || document.body.scrollLeft;
    var x = e.pageX || e.clientX + scrollX;
    volumeLeft=x-770;
    clickVolume=volumeLeft/$(".volume_progressbar").width();
    $('.volume_circle')[0].style.left = parseInt(volumeLeft) + 'px';
    $(".volume_playbar").css("width",volumeLeft+"px");
    $('.audio')[0].volume=clickVolume;
  });
  /*点击播放器面板上的播放按钮*/
  $(document).on("click",".playerBtn",function(){
    if($(".list_content1").eq(listNum).hasClass("playing")){//正在播放
      $(".list_content1").eq(listNum).removeClass("playing");
      $(".list_content1").eq(listNum).siblings(".list_content1").children(".list_content1_div").children(".list_content1_play").css({"background-position":"0px -324x"});
      $(".list_content1").eq(listNum).children(".list_content1_div").children(".list_content1_play").css({"background-position":"0px -154px"});
    }else{//正在暂停
      $(".list_content1").eq(listNum).addClass("playing");
      $(".list_content1").eq(listNum).siblings(".list_content1").children(".list_content1_div").children(".list_content1_play").css({"background-position":"0px -154x"});
      $(".list_content1").eq(listNum).children(".list_content1_div").children(".list_content1_play").css({"background-position":"0px -324px"});
    }
  });
  /*点击播放器面板上的上一首按钮*/
  $(document).on("click",".prevBtn",function(){
    if(listNum<=0){
//    alert("当前已经是第一个节目了");
      return false;
    }else{
      listNum--;
      $(".audio").attr({"src":mp3List[listNum].playUrl});
      $(".player_panel .title").html(mp3List[listNum].title);
      $(".sound_position").html("00:00");
      getTime();
      $(".playerBtn").removeClass("playing").attr("src","img/play.png");
      $('.player_circle')[0].style.left ='0px';
      $(".player_playbar").css("width","0px");
      $(".playerBtn").addClass("playing").attr("src","img/pause.png");
      $(".audio")[0].play();
      $(".list_content1").eq(listNum).addClass("playing").siblings(".list_content1").removeClass("playing");
      $(document).find(".list_content1").children(".list_content1_div").children(".list_content1_play").removeAttr("style");
      $(".list_content1").eq(listNum).children(".list_content1_div").children(".list_content1_play").css({"background-position":"0px -324px"});
      return;
    }
  });
  /*点击播放器面板上的下一首按钮*/
  $(document).on("click",".nextBtn",function(){
    if(listNum>=mp3List.length-1){
//    alert("当前已经是最后一个节目了");
      return false;
    }else{
      listNum++;
      $(".audio").attr({"src":mp3List[listNum].playUrl});
      $(".player_panel .title").html(mp3List[listNum].title);
      $(".sound_position").html("00:00");
      getTime();
      $(".playerBtn").removeClass("playing").attr("src","img/play.png");
      $('.player_circle')[0].style.left ='0px';
      $(".player_playbar").css("width","0px");
      $(".playerBtn").addClass("playing").attr("src","img/pause.png");
      $(".audio")[0].play();
      $(".list_content1").eq(listNum).addClass("playing").siblings(".list_content1").removeClass("playing");
      $(document).find(".list_content1").children(".list_content1_div").children(".list_content1_play").removeAttr("style");
      $(".list_content1").eq(listNum).children(".list_content1_div").children(".list_content1_play").css({"background-position":"0px -324px"});
    }
  });
  /*e--播放*/
 
  /*点击节目列表--跳到节目详情页*/
  $(document).on("click",".list_content1_div",function(){
    var jmid=$(this).parent(".list_content1").attr("conId");
    $("#newIframe", parent.document).attr({"src":"jm_detail.html?seqId="+contentId+"&&contentId="+jmid});
    $("#myIframe", parent.document).hide();
    $("#newIframe", parent.document).show(); 
  });
  
});
</script>
</html>