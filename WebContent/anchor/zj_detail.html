<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>专辑详情</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="">
  <meta name="description" content="">
  <link href="../resources/plugins/hplus/css/bootstrap.min.css" rel="stylesheet">
  <link href="../resources/plugins/hplus/css/font-awesome.min.css" rel="stylesheet">
  <link href="../resources/plugins/hplus/css/animate.min.css" rel="stylesheet">
  <link href="../resources/plugins/hplus/css/style.min.css" rel="stylesheet">
  <script src="../resources/plugins/hplus/js/jquery-2.1.1.min.js"></script>
  <script src="../resources/js/context.utils.js"></script>
  <!--日历插件-->
  <script src="../resources/plugins/hplus/js/plugins/layer/laydate/laydate.js"></script>
</head>
<style>
*{margin: 0;padding: 0;}
li{list-style: none;}
a,a:hover,a:link,a:focus,a:visited{text-decoration: none;}
::-webkit-scrollbar {height:12px;width:2px;background:#e7eaec; } 
::-webkit-scrollbar-thumb{height:12px;width:2px;background:#e7eaec;}
body{overflow: auto;background: #fff;-moz-user-select: none;}
.detail{
  width:1090px;
  min-width:850px;
  height:520px;
  margin:auto;
}
.detail_title{
  height: 30px;
  color: #000;
  font-size: 14px;
  margin-top: 20px;
  padding-left:20px;
  float: left;
}
.my_title{
  height: 30px;
  color: #000;
  font-size: 14px;
  margin-top: 20px;
}
.detail_content{
  width:100%;
  height:570px;
  overflow: auto;
}
.dc_left1{
  width:710px;
  float: left;
}
.dc_left{
  position: relative;
  width:710px;
  height:calc(100% - 10px);
  float: left;
  margin-top:10px;
}
.dcl_zjcontent {
  width:100%;
  padding: 0px 0px 10px 20px;
  position: relative;
  border: 1px solid #dedede;
  overflow: hidden;
}
.dcl_zjcontent1{
  float: left;
  width:180px;
  height:180px;
  position: absolute;
  margin-top:20px;
}
.dcr_zjlist1:first-child{
  margin-top:20px;
}
.dcl_zjcontent1 img{
  width:100%;
  height:100%;
  background-size:100% 100%;
  -ms-interpolation-mode:bicubic;  
}
.dcl_zjcontent2{
  float:right;
  overflow: hidden;
  width:calc(100% - 205px);
  height:auto;
  margin-top:20px;
}
.dcl_zjcontent2 h3{
  width:auto;
  display: inline-block;
  font-size: 20px;
  color:#000;
  font-family: "微软雅黑";
}
.h3span{
  color:#ffa634;
  font-size:14px;
  font-weight:100;
}
.dcl_zjcontent2 p{
  font-size:14px;
}
.dcl_zjcontent2 p span{
  font-size:15px;
  color:#000;
  font-weight: 800;
  font-family: "微软雅黑";
}
.dcl_zjcontent2 .category{
  color:#000;
  font-size:14px;
  font-weight:100;
  display: inline-block;
}
.dcl_zjcontent2 ul{
  overflow: hidden;
}
.dcl_zjcontent2 ul li{
  height: 27px;
  line-height: 27px;
  background: url("img/auto.png");
  background-position: 0 -118px;
  padding:0px 0px 0px 15px;
  float: left;
  position: relative;
  margin:10px 8px 0px 0px;
  display: inline-block;
  cursor: pointer;
}
.dcl_zjcontent2 ul li span{
  background: url("img/auto.png");
  background-position:right -118px;
  padding-right:8px;
  display: inline-block;
  vertical-align: top !important;
  white-space: nowrap;
  line-height: 27px;
}
.dcl_zjcontent3 {
  width:100%;
  margin-top:210px;
}
.dcl_zjcontent3_p1{
  font-family: "微软雅黑";
  color: #000;
  font-size: 14px;
  font-weight: 500;
  margin-top: 35px;
}
.dcl_zj_jmlist{
  width:100%;
  height:200px;
  position: absolute;
  float: left;
  margin-top:10px;
}
.list_title{
  height:30px;
  border-bottom:1px dotted #000;
  overflow: hidden;
}
.list_title h4{
  color:#000;
  float: left;
  padding-left:20px;
  height:30px;
  font-size:15px;
  line-height:30px;
}
.list_title span{
  color:#0071CE;
  float: right;
  height:30px;
  line-height:30px;
  font-size:15px;
  padding-right:10px;
  cursor: pointer;
}
.zj_jmlist {
  width: 100%;
  position: absolute;
  height: 200px;
  border: 1px solid #00458A;
}
.list_content{
  height:360px;
  overflow-y: auto;
}
.list_content1{
  height:25px;
  line-height:25px;
  border-bottom:1px solid #676a6c;
  overflow: hidden;
}
.list_content1_a,.list_content1_span1,
.list_content1_span2,
.list_content1_span3,
.list_content1_img{
  float: left;
  width:auto;
  display: inline-block;
  font-size:12px;
  font-family: "微软雅黑";
}
.list_content1_a,.list_content1_a:hover{
  color: #000;
  font-family: "微软雅黑";
  padding-left:20px;
  width:290px;
}
.list_content1_img{
  background: url("img/btn.png") repeat;
  width: 25px;
  height: 25px;
  background-size: 100%;
  cursor: pointer;
  display: inline-block;
  overflow: hidden;
  background-position: 0px -154px;
  vertical-align: middle;
  user-select: none;
  -webkit-user-select: none;
  white-space: nowrap;
  margin-left: 150px;
}
.list_content1_span1{
  padding-left:0px;
}
.list_content1_span2,.list_content1_span3{
  margin-left:25px;
}
.dc_right1{
  width:300px;
  float: left;
  margin-left:36px;
}
.dc_right{
  width:300px;
  height:670px;
  margin-top:10px;
  overflow: auto;
  border:1px solid #dedede;
}
.dcr_zjlist{
  overflow: auto;
}
.dcr_zjlist1{
  margin: 10px 10px 0px 10px;
  height: 100px;
  border-bottom: 2px solid #dedede;
}
.dcr_zjlist1:last-child{
  border-bottom: none;
}
.list1_img{
  width:80px;
  height:80px;
  float: left;
  display: inline-block;
  border:1px solid #dedede;
  cursor: pointer;
}
.list1_img img{
  width:100%;
  height:100%;
  background-size:100% 100%;
}
.list1_con{
  width:195px;
  float: left;
  padding-left:10px;
}
.zjname{
  margin-bottom: -4px;
  width: 113px;
  display: inline-block;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
</style>
<body onselectstart="return false">
<div class="detail">
  <div class="containers">
    <div class="detail_content">
      <div class="dc_left1">
        <div class="detail_title">音频管理> 专辑管理> 专辑详情</div>
        <div class="dc_left">
          <div class="dcl_zjcontent">
            <div class="dcl_zjcontent1">
              <img src="" alt="节目封面图片" />
            </div>
            <div class="dcl_zjcontent2">
              <div class="title">
                <h3></h3>
                <span class="h3span"></span>
              </div>
              <p>来自栏目<span></span></p>
              <!--<span class="category">类别 ：两性情感</span>-->
              <ul>
                <!--<li><span>标签一标签一</span></li>
                <li><span>自定义标签一</span></li>
                <li><span>自定义标签一</span></li>
                <li><span>自定义标签一</span></li>
                <li><span>自定义标签一</span></li>-->
              </ul>
              <p class="ctime"></p>
            </div>
            <div class="dcl_zjcontent3">
              <p class="dcl_zjcontent3_p1"></p>
            </div>
          </div>
          <div class="dcl_zj_jmlist">
            <div class="list_title">
              <h4></h4>
              <span>更改排序</span>
            </div>
            <audio src="" controls class="audio" style="display:none;"></audio>
            <ul class="list_content">
              <!--<li class="list_content1" style="margin-top:15px;">
                <a class="list_content1_a" href="#">vol.23 想和你一起去看海</a>
                <a class="list_content1_img" href="#"></a>
                <span class="list_content1_span1">(0)</span>
                <span class="list_content1_span2">已保存</span>
                <span class="list_content1_span3">2016-10-18</span>
              </li>-->
              <!--<li class="list_content1">
                <a class="list_content1_a" href="#">vol.23 想和你一起去看海</a>
                <a class="list_content1_img" href="#"></a>
                <span class="list_content1_span1">(0)</span>
                <span class="list_content1_span2">已保存</span>
                <span class="list_content1_span3">2016-10-18</span>
              </li>-->
              <!--<li class="list_content1">
                <a class="list_content1_a" href="#">vol.23 想和你一起去看海</a>
                <a class="list_content1_img" href="#"></a>
                <span class="list_content1_span1">(0)</span>
                <span class="list_content1_span2">已保存</span>
                <span class="list_content1_span3">2016-10-18</span>
              </li>-->
              <!--<li class="list_content1">
                <a class="list_content1_a" href="#">vol.23 想和你一起去看海</a>
                <a class="list_content1_img" href="#"></a>
                <span class="list_content1_span1">(0)</span>
                <span class="list_content1_span2">已保存</span>
                <span class="list_content1_span3">2016-10-18</span>
              </li>-->
              <!--<li class="list_content1">
                <a class="list_content1_a" href="#">vol.23 想和你一起去看海</a>
                <a class="list_content1_img" href="#"></a>
                <span class="list_content1_span1">(0)</span>
                <span class="list_content1_span2">已保存</span>
                <span class="list_content1_span3">2016-10-18</span>
              </li>-->
              <!--<li class="list_content1">
                <a class="list_content1_a" href="#">vol.23 想和你一起去看海</a>
                <a class="list_content1_img" href="#"></a>
                <span class="list_content1_span1">(0)</span>
                <span class="list_content1_span2">已保存</span>
                <span class="list_content1_span3">2016-10-18</span>
              </li>-->
              <!--<li class="list_content1">
                <a class="list_content1_a" href="#">vol.23 想和你一起去看海</a>
                <a class="list_content1_img" href="#"></a>
                <span class="list_content1_span1">(0)</span>
                <span class="list_content1_span2">已保存</span>
                <span class="list_content1_span3">2016-10-18</span>
              </li>-->
            </ul>
          </div>
        </div>
      </div>
      <div class="dc_right1">
        <div class="my_title">我的专辑</div>
        <div class="dc_right">
          <div class="dcr_zjlist">
            <!--<div class="dcr_zjlist1">
              <div class="list1_img">
                <img src="" alt="节目图片" />
              </div>
              <div class="list1_con">
                <p class="list1_con_name">
                  <span>专辑名称 ：</span>
                  <span>双份的阳光</span>
                </p>
                <p class="list1_con_num">
                  <span>节目数量 ： </span>
                  <span>8个</span>
                </p>
                <p class="list1_con_time">
                  <span>时间 ：</span>
                  <span>2016-10-08 10:47:35</span>
                </p>
              </div>
            </div>-->
            <!--<div class="dcr_zjlist1">
              <div class="list1_img">
                <img src="" alt="节目图片" />
              </div>
              <div class="list1_con">
                <p class="list1_con_name">
                  <span>专辑名称 ：</span>
                  <span>双份的阳光</span>
                </p>
                <p class="list1_con_num">
                  <span>节目数量 ： </span>
                  <span>8个</span>
                </p>
                <p class="list1_con_time">
                  <span>时间 ：</span>
                  <span>2016-10-08 10:47:35</span>
                </p>
              </div>
            </div>-->
            <!--<div class="dcr_zjlist1">
              <div class="list1_img">
                <img src="" alt="节目图片" />
              </div>
              <div class="list1_con">
                <p class="list1_con_name">
                  <span>专辑名称 ：</span>
                  <span>双份的阳光</span>
                </p>
                <p class="list1_con_num">
                  <span>节目数量 ： </span>
                  <span>8个</span>
                </p>
                <p class="list1_con_time">
                  <span>时间 ：</span>
                  <span>2016-10-08 10:47:35</span>
                </p>
              </div>
            </div>-->
          </div> 
        </div>
      </div>
    </div>
  </div>
</div>
</body>
<script>
$(function(){
  var href=$("#newIframe", parent.document).attr("src");
  var contentId=href.split('?')[1].split("=")[1];
  var rootPath=getRootPath();
  
  getZjDetail(contentId);//得到专辑信息
  function getZjDetail(contentId){
    $.ajax({
      type:"POST",
      url:rootPath+"content/seq/getSeqMediaInfo.do",
      dataType:"json",
      data:{"DeviceId":"3279A27149B24719991812E6ADBA5584",
            "MobileClass":"Chrome",
            "UserId":"123",
            "PCDType":"3",
            "ContentId":contentId
      },
      success:function(resultData){
        if(resultData.ReturnType == "1001"){
          fillZjDetail(resultData);//填充专辑数据
        }else{
          alert(resultData.Message);
        }
      },
      error:function(XHR){
        alert("发生错误："+ jqXHR.status);
      }
    });
  }
  
  //填充专辑数据
  function fillZjDetail(resultData){
    $(".dcl_zjcontent2 h3").html(resultData.Result.ContentName);
    $(".dcl_zjcontent2 .h3span").html("("+resultData.Result.SubCount+"个节目)");
    $(".dcl_zjcontent1 img").attr("src",resultData.Result.ContentImg);
    $(".dcl_zjcontent2 p span").html("【"+resultData.Result.ContentPubChannels[0].ChannelName+"】");
    if(resultData.Result.ContentKeyWords!=null){
      for(var i=0;i<resultData.Result.ContentKeyWords.length;i++){
        var newli='<li><span>'+resultData.Result.ContentKeyWords[i].TagName+'</span></li>';
        $(".dcl_zjcontent2 ul").append(newli);
      }
    }
    $(".ctime").html(resultData.Result.CTime);
    $(".dcl_zjcontent3_p1").html(resultData.Result.ContentDesc);
    $(".list_title h4").html("共"+resultData.Result.SubCount+"个节目");
    if(resultData.Result.MediaAssetList!=null){
      for(var i=0;i<resultData.Result.MediaAssetList.length;i++){
        var newjiList='<li class="list_content1" contentSeqId='+resultData.Result.MediaAssetList[i].ContentSeqId+' style="margin-top:15px;">'+
                        '<span class="list_content1_a" href="#">'+resultData.Result.MediaAssetList[i].ContentName+'</span>'+
                        '<span class="list_content1_img play_pause" href="javascrript:" contentPlay='+resultData.Result.MediaAssetList[i].ContentPlay+'></span>'+
                        '<span class="list_content1_span1">('+resultData.Result.MediaAssetList[i].PlayCount+')</span>'+
                        '<span class="list_content1_span2">'+resultData.Result.ContentPubChannels[0].FlowFlagState+'</span>'+
                        '<span class="list_content1_span3">'+resultData.Result.MediaAssetList[i].CTime+'</span>'+
                      '</li>';
        $(".list_content").append(newjiList);             
      }
    }
  }
  
  getMyZjDetail();//得到我的所有专辑信息
  function getMyZjDetail(){
    $.ajax({
      type:"POST",
      url:rootPath+"content/seq/getSeqMediaList.do",
      dataType:"json",
      data:{"DeviceId":"3279A27149B24719991812E6ADBA5584",
           "MobileClass":"Chrome",
           "UserId":"123",
           "PCDType":"3",
           "FlagFlow":"0",
           "ChannelId":"0",
           "ShortSearch":"false"
      },
      success:function(resultData){
        if(resultData.ReturnType == "1001"){
          fillMyZjDetail(resultData);//填充我的所有专辑的数据
        }else{
          alert(resultData.Message);
        }
      },
      error:function(XHR){
        alert("发生错误："+ jqXHR.status);
      }
    });
  }
  
  //填充我的所有专辑的数据
  function fillMyZjDetail(resultData){
    for(var i=0;i<resultData.ResultList.length;i++){
      var newzj='<div class="dcr_zjlist1" contentId='+resultData.ResultList[i].ContentId+'>'+
                '<div class="list1_img">'+
                  '<img src='+resultData.ResultList[i].ContentImg+' alt="节目图片" />'+
                '</div>'+
                '<div class="list1_con">'+
                  '<p class="list1_con_name">'+
                    '<span>专辑名称 ：</span>'+
                    '<span class="zjname">'+resultData.ResultList[i].ContentName+'</span>'+
                  '</p>'+
                  '<p class="list1_con_num">'+
                    '<span>节目数量 ： </span>'+
                    '<span>'+resultData.ResultList[i].SubCount+'个</span>'+
                  '</p>'+
                  '<p class="list1_con_time">'+
                    '<span>时间 ：</span>'+
                    '<span>'+resultData.ResultList[i].CTime+'</span>'+
                  '</p>'+
                '</div>'+
              '</div>';
      $(".dcr_zjlist").append(newzj);
    }
  }
  
  //点击右侧我的所有专辑列表，调到对应的详情页
  $(document).on("click",".list1_img",function(){
    var contentId=$(this).parent(".dcr_zjlist1").attr("contentId");
    $("#newIframe", parent.document).attr({"src":"zj_detail.html?contentId="+contentId+""});
    getZjDetail(contentId);
  })
  
  //点击专辑的节目列表的播放按钮
  $(document).on("click",".list_content1_img",function(){
    var audios=$(".audio")[0];//定义播放器的容器
    var contentPlay=$(this).attr("contentPlay");
    if($(this).hasClass("play_pause")){
      $(this).parent().siblings(".list_content1").children(".list_content1_img").removeClass("playing").addClass("play_pause");
      $(this).parent().siblings(".list_content1").children(".list_content1_img").css({"background-position":"0px -154px"});
      $(this).removeClass("play_pause").addClass("playing");
      $(".audio").attr({"src":contentPlay});
      audios.play();
      $(this).css({"background-position":"0px -324px"});
    }else{
      $(this).parent().siblings(".list_content1").children(".list_content1_img").removeClass("playing").addClass("play_pause");
      $(this).parent().siblings(".list_content1").children(".list_content1_img").css({"background-position":"0px -324px"});
      $(this).removeClass("playing").addClass("play_pause");
      $(".audio").removeAttr("src");
      audios.pause();
      $(this).css({"background-position":"0px -154px"});
    }
  });
  
});
</script>
</html>