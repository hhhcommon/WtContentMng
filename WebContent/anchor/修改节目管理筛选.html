<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>修改--节目管理</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="">
  <meta name="description" content="">
  <link href="../resources/plugins/hplus/css/bootstrap.min.css" rel="stylesheet">
  <link href="../resources/plugins/hplus/css/font-awesome.min.css" rel="stylesheet">
  <link href="../resources/plugins/hplus/css/animate.min.css" rel="stylesheet">
  <link href="../resources/plugins/hplus/css/style.min.css" rel="stylesheet">
  <link href="css/add.css" rel="stylesheet"  />
  <script src="../resources/plugins/hplus/js/jquery-2.1.1.min.js"></script>
  <script src="../resources/js/context.utils.js"></script>
  <!--<script src="js/common_manage.js"></script>-->
  <!--<script src="js/manage_jm.js"></script>-->
  <script src="../resources/plugins/hplus/js/plugins/layer/laydate/laydate.js"></script>
</head>
<style>
*{margin: 0;padding: 0;}
li{list-style: none;}
a,a:hover,a:link,a:focus,a:visited{text-decoration: none;}
a:hover{color:#ffa634;}
::-webkit-scrollbar {height:12px;width:2px;background:#e7eaec; } 
::-webkit-scrollbar-thumb{height:12px;width:2px;background:#e7eaec;}
body{overflow: auto;}
.content{
  width:100%;
  min-width:780px;
  height:auto;
}
.content .container{
  position: relative;
}
.content .container .row{
  margin-left:0px;
  margin-right:0px;
  position: inherit;
}
.con_right{
  /*height:1090px;*/
  /*border:1px solid #dedede;*/
}
.ri_top{
  width:100%;
  height:50px;
  overflow: hidden;
}
.ri_top_li1{
  width:156px;
  height:30px;
  color:#000;
  font-size:14px;
  margin-top:20px;
  float: left;
}
.ri_top_li2{
  float: left;
  margin-top: 16px;
  width: 180px;
  height: 30px;
}
.ri_top_li2_inp{
  width: 180px;
  height: 30px;
  font-size: 14px;
  padding-left: 6px;
}
.ri_top_li2_img{
  position: absolute;
  top: 23px;
  left: 324px;
  width: 18px;
  height: 18px;
  background-size: 100% 100%;
}
.ri_top_li3{
  width:86px;
  height:30px;
  float: left;
  margin-left:10px;
  margin-top:16px;
  cursor: pointer;
}
.ri_top_li4{
  width: 80px;
  height: 30px;
  float: left;
  background: #eaeaea;
  position: absolute;
  top:16px;
  right:1.7%;
  cursor: pointer;
}
.ri_top_li4 span{
  line-height: 30px;
  margin-left:3px;
}
.ri_top_li4 img{
  margin-left:6px;
}
/*中间右侧区域样式2*/
.ri_top2{
  width:100%;
  height:auto;
  border: 1px solid #dedede; 
  overflow: hidden;
  margin-top:15px;
}
.attr{
  position: relative;
  width:100%;
  float: left;
  border-style: solid solid dotted;
  border-width: 0 0 1px;
}
.ri_top2 .attr:first-child{
  border-top:none;
}
.ri_top2 .attr:last-child{
  border-bottom:none;
}
.attrKey{
  display: block;
  overflow: hidden;
  float: left;
  width:88px;
  height:40px;
  line-height:40px;
  color: rgb(91,90,90);
  text-indent: 20px;
  text-overflow: ellipsis;
  font-size:14px;
  background: #f5f5f5;
}
.attrValues {
  position:relative;
  float: left;
  background-color: #FFF;
  overflow: hidden;
}
.attrValues .av-gather{
  overflow: hidden;
  position: relative;
  height:40px;
  margin-bottom:0px;
}
.trig_item{
  display: block;
  float: left;
  margin-left:16px;
  height:40px;
  line-height: 40px;
  white-space: nowrap;
  cursor: pointer;
}
.trig_curr{
  height:41px;
  position:relative;
  z-index:2;
  border:1px solid #8e8e8e;
  border-bottom:medium none;
  background: #8e8e8e;
  color:#f60;
}
.tab_cont_item{
  width:100%;
  border:1px solid #8e8e8e;
  position: relative;
  left:0px;
  display: none;
  overflow: hidden;
}
.tab_cont_item li{
  float:left;
  height:40px;
  line-height:40px;
  margin-left:20px;
}
.con_right ul{
  margin-bottom:0px;
}
/*所有分类*/
.all{
  width:100%;
  height:auto;
  border:1px solid #dedede;
  overflow: hidden;
  padding:0px 0px 10px 0px;
  display: none;
}
.all_cate{
  width:70px;
  height:25px;
  line-height:25px;
  float: left;
  margin-top:10px;
  color:#000;
}
.new_cate{
  width:calc(100% - 100px);
  height:auto;
  float: left;
  color:#000;
}
.cate{
  width: auto;
  height: 25px;
  line-height: 22px;
  padding:0 1px 0 6px;
  float: left;
  margin-left:10px;
  border: 1px solid #ccc;
  cursor: pointer;
  white-space: nowrap;
  margin-top:10px;
}
.cate:hover{
  border: 1px solid #FFA634;
}
.cate:hover .cate_img{
  color:#FFA634;
}
.cate_desc{
  width:auto;
  height:20px;
  line-height:20px;
}
.cate_img{
  display: inline-block;
  width: 18px;
  height: 18px;
  line-height: 18px;
  font-size: 16px;
  font-weight: 700;
  margin-left: 8px;
  color:#dedede;
}
.check_cate{
  width:20px;
  height:20px;
  float: left;
  margin-top:5px;
  background: url(img/sprite.png);
  background-repeat:no-repeat ;
  background-position: -41px -414px;
  display: none;
}
.check_more {
  display: inline-block;
  float: right;
  margin-right: 40px;
  height: 22px;
  margin-top:8px;
  margin-bottom:8px;
  line-height: 22px;
  border: 1px solid #ddd;
  padding: 0px 5px 0px 5px;
  position: relative;
  background: #fff;
  color: #333;
  cursor: pointer;
}
.ss1{
  float:left;
}
.btns{
  width: 100%;
  height: 30px;
  float: left;
  margin-top: 10px;
  display: none; 
  text-align: center;
}
.btns_sub{
  color: #fff;
  background: #ffa634;
  border: 1px solid #ffa634;
  display: inline-block;
  margin: 5px;
  border-radius: 2px;
  height: 20px;
  width: 42px;
  line-height: 20px;
  text-align: center;
  cursor: pointer;
}
.btns_can{
  color: #fff;
  background: #ccc;
  border: 1px solid #ccc;
  display: inline-block;
  margin: 5px;
  border-radius: 2px;
  height: 20px;
  width: 42px;
  line-height: 20px;
  text-align: center;
  cursor: pointer;
}
</style>
<body>
<div class="content">
  <div class="container">
    <div class="row">
      <div class="col-md-12 con_right">
        <ul class="ri_top">
          <li class="ri_top_li1">音频管理 > 节目管理</li>
          <li class="ri_top_li2">
            <input class="ri_top_li2_inp" type="text" placeholder="搜索节目"/>
            <img class="ri_top_li2_img" src="img/search1.png" alt="搜索按钮" />
          </li>
          <li class="ri_top_li3"><img src="img/upLoadJM.png" alt="上传节目" /></li>
          <li class="ri_top_li4"><span class="filter">收起筛选</span><img src="img/filter1.png" alt="收起筛选" /></li>
        </ul>
        <div class="all">
          <div class="all_cate">所有分类 > </div>
          <ul class="new_cate">
            <!--<li class="cate"><span class="cate_desc"><span class="cate_desc_title">所属栏目：</span>专辑一,专辑二,专辑三</span><span class="cate_img">×</span></li>
            <li class="cate"><span class="cate_desc"><span class="cate_desc_title">所属栏目：</span>电影电视</span><span class="cate_img">×</span></li>
            <li class="cate"><span class="cate_desc"><span class="cate_desc_title">节目状态：</span>发布</span><span class="cate_img">×</span></li>
            <li class="cate"><span class="cate_desc"><span class="cate_desc_title">所属栏目：</span>脱口秀</span><span class="cate_img">×</span></li>-->
          </ul>
        </div>
        <div class="ri_top2">
          <div class="attr" id="status">
            <div class="attrKey">节目状态 :</div>
            <div class="attrValues">
              <ul class="av-gather av_ul">
                <li class="trig_item"><div class="check_cate"></div><a class="ss1" href="javascript:void(0)">已保存</a></li>
                <li class="trig_item"><div class="check_cate"></div><a class="ss1" href="javascript:void(0)">审核</a></li>
                <li class="trig_item"><div class="check_cate"></div><a class="ss1" href="javascript:void(0)">发布</a></li>
                <li class="trig_item"><div class="check_cate"></div><a class="ss1" href="javascript:void(0)">撤回</a></li>
              </ul>
            </div>
            <div class="btns">
              <span class="btns_sub">确定</span>
              <span class="btns_can">取消</span>
            </div>
            <span class="check_more">多选</span>
          </div>
          <div class="attr" id="album">
            <div class="attrKey">所属专辑 :</div>
            <div class="attrValues">
              <ul class="av-gather av_ul">
                <li class="trig_item" ><div class="check_cate"></div><a class="ss1" href="javascript:void(0)">专辑1</a></li>
                <li class="trig_item" ><div class="check_cate"></div><a class="ss1" href="javascript:void(0)">专辑2</a></li>
                <li class="trig_item" ><div class="check_cate"></div><a class="ss1" href="javascript:void(0)">专辑3</a></li>
                <li class="trig_item" ><div class="check_cate"></div><a class="ss1" href="javascript:void(0)">专辑4</a></li>
                <li class="trig_item" ><div class="check_cate"></div><a class="ss1" href="javascript:void(0)">专辑5</a></li>
                <li class="trig_item" ><div class="check_cate"></div><a class="ss1" href="javascript:void(0)">专辑6</a></li>
                <li class="trig_item" ><div class="check_cate"></div><a class="ss1" href="javascript:void(0)">专辑7</a></li>
                <li class="trig_item" ><div class="check_cate"></div><a class="ss1" href="javascript:void(0)">专辑8</a></li>
              </ul>
              <ul class="av-gather av_ul">
                <li class="trig_item" ><div class="check_cate"></div><a class="ss1" href="javascript:void(0)">专辑9</a></li>
                <li class="trig_item" ><div class="check_cate"></div><a class="ss1" href="javascript:void(0)">专辑10</a></li>
                <li class="trig_item" ><div class="check_cate"></div><a class="ss1" href="javascript:void(0)">专辑11</a></li>
                <li class="trig_item" ><div class="check_cate"></div><a class="ss1" href="javascript:void(0)">专辑12</a></li>
                <li class="trig_item" ><div class="check_cate"></div><a class="ss1" href="javascript:void(0)">专辑13</a></li>
                <li class="trig_item" ><div class="check_cate"></div><a class="ss1" href="javascript:void(0)">专辑14</a></li>
                <li class="trig_item" ><div class="check_cate"></div><a class="ss1" href="javascript:void(0)">专辑15</a></li>
              </ul>
            </div>
            <div class="btns">
              <span class="btns_sub">确定</span>
              <span class="btns_can">取消</span>
            </div>
            <span class="check_more">多选</span>
          </div>
          <div class="attr" id="channel">
            <div class="attrKey">所属栏目 :</div>
            <div class="attrValues">
              <ul class="av-gather av_ul">
                <li class="trig_item chnel" data_idx="0"><a  class="ss1" href="javascript:void(0)">电影电视</a></li>
                <li class="trig_item chnel" data_idx="1"><a  class="ss1" href="javascript:void(0)">脱口秀</a></li>
                <li class="trig_item chnel" data_idx="2"><a  class="ss1" href="javascript:void(0)">历史人文</a></li>
                <li class="trig_item chnel" data_idx="3"><a  class="ss1" href="javascript:void(0)">商业财经</a></li>
                <li class="trig_item chnel" data_idx="4"><a  class="ss1" href="javascript:void(0)">儿童科教</a></li>
              </ul>
            </div>
            <ul class="tab_cont_item chnels" data_idx="0" data_name="电影电视">
              <li class="trig_item_li"><a class="ss1" href="javascript:void(0)">二级栏目1</a></li>
              <li class="trig_item_li"><a class="ss1" href="javascript:void(0)">二级栏目1</a></li>
              <li class="trig_item_li"><a class="ss1" href="javascript:void(0)">二级栏目1</a></li>
            </ul>
            <ul class="tab_cont_item chnels" data_idx="1" data_name="脱口秀">
              <li class="trig_item_li"><a class="ss1" href="javascript:void(0)">二级栏目2</a></li>
              <li class="trig_item_li"><a class="ss1" href="javascript:void(0)">二级栏目2</a></li>
              <li class="trig_item_li"><a class="ss1" href="javascript:void(0)">二级栏目2</a></li>
            </ul>
            <ul class="tab_cont_item chnels" data_idx="2" data_name="历史人文">
              <li class="trig_item_li"><a class="ss1" href="javascript:void(0)">二级栏目3</a></li>
              <li class="trig_item_li"><a class="ss1" href="javascript:void(0)">二级栏目3</a></li>
              <li class="trig_item_li"><a class="ss1" href="javascript:void(0)">二级栏目3</a></li>
            </ul>
            <ul class="tab_cont_item chnels" data_idx="3" data_name="商业财经">
              <li class="trig_item_li"><a class="ss1" href="javascript:void(0)">二级栏目4</a></li>
              <li class="trig_item_li"><a class="ss1" href="javascript:void(0)">二级栏目4</a></li>
              <li class="trig_item_li"><a class="ss1" href="javascript:void(0)">二级栏目4</a></li>
            </ul>
          </div>
        </div> 
      </div>
    </div>
  </div>
</div> 
</body>
<script>
var type=2;//type=1点击多选,type=2未点击多选
var overChannel=false;

$(document).on("click",".check_more",function(){
  type=1;
//console.log($(this).siblings(".attrValues").children(".av_ul").children(".trig_item").children(".check_cate"));
  $(this).siblings(".attrValues").children(".av_ul").children(".trig_item").children(".check_cate").show();
  $(this).hide();
  $(this).siblings(".btns").show();
});
$(document).on("click",".trig_item",function(){
  if($(".all").is(':hidden')) $(".all").show();
  var pId=$(this).parents(".attr").attr("id");
  var pTitle='';
  if(pId=="status"){
    pTitle="节目状态：";
  }
  if(pId=="album"){
    pTitle="所属专辑：";
  }
  if(pId=="channel"){
    pTitle="所属栏目：";
  }
  if(type=="1"){//点击多选后选中某一项
    if($(this).children(".check_cate").css("background-position")=="-62px -414px"){
      $(this).children(".check_cate").css({"background-position":"-41px -414px"});
      $(this).removeAttr("selected");
    }else{
      $(this).children(".check_cate").css({"background-position":"-62px -414px"});
      $(this).attr({"selected":"selected"});
    }
  }
  if(type=="2"){//没有点击多选直接选中某一项
    $(this).attr({"selected":"selected"});
    var newFilter='<li class="cate" pId='+pId+'>'+
                  '<span class="cate_desc"><span class="cate_desc_title">'+pTitle+'</span>'+$(this).children(".ss1").text()+'</span>'+
                  '<span class="cate_img">×</span>'+
                '</li>';
    $(".new_cate").append(newFilter);
    $("#"+pId).children(".attrValues").children(".av_ul").children(".trig_item").children(".check_cate").css({"background-position":"-41px -414px"}).hide();
    $("#"+pId).children(".attrValues").children(".av_ul").children(".trig_item").removeAttr("selected");
    $("#"+pId).hide();
  }
});
$(document).on("click",".btns_sub",function(){
  var pId=$(this).parents(".attr").attr("id");
  var pTitle='';
  if(pId=="status"){
    pTitle="节目状态：";
  }
  if(pId=="album"){
    pTitle="所属栏目：";
  }
  if(pId=="channel"){
    pTitle="所属专辑：";
  }
  var str=" ";
  $(this).parent().siblings(".attrValues").children(".av_ul").children(".trig_item").each(function(){
    if(typeof($(this).attr("selected"))!="undefined"){
      var txt=$(this).children(".ss1").text();
      if(str==" "){
        str=txt;
      }else{
        str+=","+txt;
      }
    }
  })
  console.log(str);
  var newFilter='<li class="cate" pId='+pId+'>'+
                  '<span class="cate_desc"><span class="cate_desc_title">'+pTitle+'</span>'+str+'</span>'+
                  '<span class="cate_img">×</span>'+
                '</li>';
  $(".new_cate").append(newFilter);
  $("#"+pId).children(".attrValues").children(".av_ul").children(".trig_item").children(".check_cate").css({"background-position":"-41px -414px"}).hide();
  $("#"+pId).children(".attrValues").children(".av_ul").children(".trig_item").removeAttr("selected");
  $("#"+pId).hide();
});
$(document).on("click",".btns_can",function(){
  var pId=$(this).parents(".attr").attr("id"); 
  $("#"+pId).children(".attrValues").children(".av_ul").children(".trig_item").children(".check_cate").css({"background-position":"-41px -414px"}).hide();
  $("#"+pId).children(".attrValues").children(".av_ul").children(".trig_item").removeAttr("selected");
  $(this).parent(".btns").hide();
  $(this).parent(".btns").siblings(".check_more").show();
});
$(document).on("click",".cate_img",function(){
  $(this).parent(".cate").remove();
  var pId=$(this).parent(".cate").attr("pId");
  $("#"+pId).children(".btns").hide();
  $("#"+pId).show();
  if($(".all").children(".new_cate").children("li").length<=0){
    $(".all").hide();
  }
});
$(document).on("mouseenter","#channel .chnel",function(){
  overChannel=true;
  var pid=$(this).attr("data_idx");
  $(".chnels").each(function(){
    if(pid==$(this).attr("data_idx")){
      $(".chnels").hide();
      $("#channel .chnel").removeClass("trig_curr");
      $("#channel .chnel[data_idx="+pid+"]").addClass("trig_curr");
      $(this).show();
    }
  })
});
$(document).on("mouseleave","#channel .chnel",function(){
  overChannel=false;
  setTimeout(function(){
    if(overChannel) return;
    $("#channel .chnel").removeClass("trig_curr");
    $(".chnels").hide();
  },200)
});
$(document).on("mouseenter","#channel .chnels",function(){
  overChannel=true;
  var pid=$(this).attr("data_idx");
  $(".chnel").each(function(){
    if(pid==$(this).attr("data_idx")){
      $("#channel .chnel").removeClass("trig_curr");
      $(this).addClass("trig_curr");
      $("#channel .chnels").hide();
      $("#channel .chnels[data_idx="+pid+"]").show();
    }
  })
});
$(document).on("mouseleave","#channel .chnels",function(){
  overChannel=false;
  setTimeout(function(){
    if(overChannel) return;
    $("#channel .chnel").removeClass("trig_curr");
    $("#channel .chnels").hide();
  },200)
});
$(document).on("click",".trig_item_li",function(){
  if($(".all").is(':hidden')) $(".all").show();
  var pname=$(this).parent(".chnels").attr("data_name");
  var newFilter='<li class="cate" pId="channel">'+
                  '<span class="cate_desc"><span class="cate_desc_title">所属栏目&gt;'+pname+'</span>'+"&gt;"+$(this).children(".ss1").text()+'</span>'+
                  '<span class="cate_img">×</span>'+
                '</li>';
  $(".new_cate").append(newFilter);
  $("#channel").children(".attrValues").children(".av_ul").children(".trig_item").children(".check_cate").css({"background-position":"-41px -414px"}).hide();
  $("#channel").children(".attrValues").children(".av_ul").children(".trig_item").removeAttr("selected");
  $("#channel").hide();
});
$(document).on("click",".ri_top_li4",function(){
  if($(this).children(".filter").text()=="收起筛选"){
    $(this).children("img").attr({"src":"img/filter2.png"});
    $(this).children(".filter").text("展开筛选");
    $(".ri_top2").hide();
  }else{
    $(this).children("img").attr({"src":"img/filter1.png"});
    $(this).children(".filter").text("收起筛选");
    $(".ri_top2").show();
  }
});
</script>
</html>
