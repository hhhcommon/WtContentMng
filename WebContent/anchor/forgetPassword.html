<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>忘记密码</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="我听，我享听">
  <meta name="description" content="我听，我享听">
  <link href="../resources/plugins/hplus/css/bootstrap.min.css" rel="stylesheet">
  <link href="../resources/plugins/hplus/css/font-awesome.min.css" rel="stylesheet">
  <link href="../resources/plugins/hplus/css/animate.min.css" rel="stylesheet">
  <link href="../resources/plugins/hplus/css/style.min.css" rel="stylesheet">
  <script src="../resources/plugins/hplus/js/jquery-2.1.1.min.js"></script>
  <script src="../resources/js/mainPage.js"></script>
  <script src="../resources/js/context.utils.js"></script>
</head>
<style>
*{margin: 0;padding: 0;}
li{list-style: none;}
a,a:hover,a:link,a:focus,a:visited{text-decoration: none;}
::-webkit-scrollbar {height:12px;width:2px;background:#e7eaec; } 
::-webkit-scrollbar-thumb{height:12px;width:2px;background:#e7eaec;}
html,body{height:100%;overflow-x: auto;font-family: "微软雅黑";}
.wrapper{
  width:100%;
  height:100%;
  position: absolute;
  background-image:url("img/bg.jpg");
  background-size:100% 100%;
}
.header{
  width:100%;
  height:80px;
  background: #ffa634;
}
.header img{
  background-size:100% 100%;
}
.containers{
  width:450px;
  margin:80px auto;
  background: #fff;
}
.nav_tabs{
  padding: 20px 0px;
  text-align: center;
  font-size: 24px;
  color:#FFA634;
}
.con_tabs{
  width: 100%;
  padding:0px 40px 20px;
}
.div1,.div2,.div3,.div4{
  width:100%;
  height:40px;
  margin-top:15px;
}
.div4{
  margin-top:40px;
}
.div1 span,.div2 span,.div3 span{
  width:50px;
  height:100%;
  color: #000;
  font-size:16px;
}
.div1 input,.div2 input{
  width:310px;
  height:100%;
  padding:2px 7px;
}
.div3 .ver_code{
  width:120px;
  height:40px;
  line-height:40px;
  background: #ffa634;
  color: #fff;
  display: inline-block;
  margin-left:10px;
  text-align: center;
  cursor: pointer;
}
.div3 input{
  width:175px;
  height: 40px;
  padding: 2px 7px;
}
.save_btn{
  width: 100%;
  height: 40px;
  line-height: 40px;
  display: block;
  text-align: center;
  background:#ffa634;
  color:#fff;
  font-weight: bold;
  font-size: 16px;
  border: none;
  border-radius: 4px;
}
form{
  margin-bottom: 25px;
}
.mask_gif{
  width: 450px;
  height: 395px;
  position: absolute;
  background: rgba(0,0,0,0.6);
  display: none;
}
.mask_gif img{
  width: 50px;
  height: 50px;
  position: absolute;
  margin-top: 130px;
  margin-left: 190px;
}
</style>
<body onselectstart="return false">
  <div class="wrapper">
    <div class="header">
      <img src="img/logo1.png" alt="logo" />
    </div>
    <div class="containers">
      <div class="mask_gif">
        <img src="img/waiting_circle.gif" alt="图片上传等待" />
      </div>
      <div class="nav_tabs">
        <span>重置密码</span>
      </div>
      <div class="con_tabs">
        <div class="fgpw_area con_tab">
          <form id="fgpw_form">
            <div class="div1">
              <span>账&nbsp;&nbsp;&nbsp;号</span>
              <input type="text" placeholder="手机号/用户名" />
            </div>
            <div class="div2">
              <span>新密码</span>
              <input type="text" placeholder="请输入新密码" />
            </div>
            <div class="div3">
              <span>验证码</span>
              <input type="text" placeholder="请输入验证码" />
              <span class="ver_code">获取验证码</span>
            </div>
            <div class="div4">
              <input type="submit" value="确   定" class="save_btn"/>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>   
</body>
<script>
$(function(){
  var rootPath=getRootPath();
  
  //修改密码--点击确定
  $(".save_btn").on("click",function(){
    //不能通过手机注册，所以找回密码这一项暂不支持
    debugger;
    var data={};
    var deviceId="";
    var pcdType=3;
    var sId=$.trim($(".div1 input").val());
    var sPassword=$.trim($(".div2 input").val());
    data.IMEI=deviceId;
    data.PCDType=pcdType;
    data.RetrieveUserId =sId;
    data.Password=sPassword;
    $.ajax({
      type:"POST",
      url:rootPath+"passport/user/updatePwd_AfterCheckPhoneOK.do",
      dataType:"json",
      data:JSON.stringify(data),
      beforeSend:function(){
        $(".mask_gif").show();
      },
      success: function(returnData){
        if(returnData.ReturnType=="1001"){
          return false;
          alert("祝贺您密码找回成功！");
          var logSuccessName=returnData.UserInfo.UserName;
          var logSuccessId=returnData.UserInfo.UserId;
          window.location.href="./anchor_index.html?userName="+logSuccessName+"&&userId="+logSuccessId;
        }else{
          alert("账号或密码有误"+returnData.Message);
        }
        $(".mask_gif").hide();
      },
      error:function(jqXHR){
        alert("发生错误" + jqXHR.status);
      }
    });
  });
});
</script>
</html>
