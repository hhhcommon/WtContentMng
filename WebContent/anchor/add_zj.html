<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>创建专辑--修改日历插件</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="">
  <meta name="description" content="">
  <link href="../resources/plugins/hplus/css/bootstrap.min.css" rel="stylesheet">
  <link href="../resources/plugins/hplus/css/font-awesome.min.css" rel="stylesheet">
  <link href="../resources/plugins/hplus/css/animate.min.css" rel="stylesheet">
  <link href="../resources/plugins/hplus/css/style.min.css" rel="stylesheet">
  <script src="../resources/plugins/hplus/js/jquery-2.1.1.min.js"></script>
  <script src="../resources/js/context.utils.js"></script>
  <!--日历插件-->
  <script src="../resources/plugins/hplus/js/plugins/layer/laydate/laydate.js"></script>
<style>
*{margin:0;padding: 0;}
li{list-style: none;}
html,body{
  height: auto;
}
.add{
  height:auto;
  font-family: "微软雅黑";
  position: relative;
  z-index:1000;
  top:0px;
  left:0px;
  right:0px;
  bottom:0px;
  overflow-y: auto;
}
.form-horizontal .form-group {
  margin-left: 0px !important; 
} 
.ibox{
  margin-bottom:0px !important;
}
.iboxtitle{
  background: #fff;
  padding:9px 15px 7px;
}
.iboxtitle h4{
  font-size:16px;
  color:#000;
  float: left;
}
.iboxtitle .ibox-tools{
  padding:4px;
}
.iboxtitle .ibox-tools a{
  color:#000;
}
.form-group{
  margin-top:40px !important;
}
.control-label{
  font-size:16px;
  color:#000;
  text-align: center;
  width:auto !important;
  padding-left:18px;
}
.control-label .ast{
  color: #ffa634;
}
.upl_wj{
  width:13%;
  float: left;
}
.upl_wj_p1{
  float: left;
  font-size: 12px;
  margin-left: 0px;
  margin-top:6px;
  color: red;
}
.upl_wj_p1 span{
  color:#000;
}
.upl_yp{
  width:81%;
  height:30px;
  margin-left:6%;
  float: left;
  border:1px solid #dedede;
  overflow: hidden;
}
.upl_yp .yp_mz{
  width:120px;
  height:30px;
  background:red;
  float:left;
  line-height:30px;
}
.upl_yp progress{
  line-height: 30px;
  margin-top: 6px;
  border: 1px solid transparent;
  margin-left: 10px;
  background: #ffa634;
  width:200px;
  height:18px;
  float: left;
}
.upl_yp span{
  margin-bottom: 30px;
  line-height: 30px;
  float: left;
  margin-left: 16px;
  display: block;
}
.upl_yp img{
  width: 18px;
  height: 18px;
  margin-top: 6px;
  margin-left: 10px;
}
.upl_mc input{
  width: 100%;
  height: 30px;
  color:#000;
  border: 1px solid #dedede;
}
.upl_mc P{
  color:#0009;
  font-size:12px;
}
.upl_pt{
  overflow: hidden;
}
.upl_pt .previewImg{
  width:100px;
  height:100px;
  float: left;
  border:1px solid #dedede;
}
.upl_pt .upl_pt_img{
  margin-left:10px;
  margin-top:20px;
  float: left;
}
.upl_pt p{
  position: absolute;
  margin-left:-100px;
  margin-top:60px;
  display: inline-block;
  float: left;
}
.upl_zj{
  width:215px;
  height:30px;
  margin-top:5px;
  padding-left:7px;
  border:1px solid #dedede;
  appearance:none;
  -moz-appearance:none;
  -webkit-appearance:none;
  background: url("img/upl_img4.png") no-repeat scroll right center transparent;
  padding-right: 14px;
}
.tag_box{
  width:100%;
  height: auto;
  border:1px solid #dedede;
}
.upl_bq{
  width:100%;
  height:auto;
  margin-bottom:0;
  overflow: hidden;
}
.upl_bq .upl_bq_img{
  height: 20px;
  background: url("img/upl_img5.png");
  background-size:100% 100%;
  padding:0px 15px 0px 15px;
  float: left;
  position: relative;
  margin:15px 15px 0px 7px;
  display: inline-block;
  cursor: pointer;
}
.upl_bq .upl_bq_img span{
 padding-right:8px;
 padding-left: 1px;
 display: inline-block;
 vertical-align: top !important;
 white-space: nowrap;
 line-height: 20px;
}
.cancelImg{
  position: absolute;
  top:-8px;
  right:-5px;
  display: none;
}
.input_tag .tag_txt{
  width:100%;
  height:30px;
  padding: 0 10px;
  border:none;
}
.my_tag,.gg_tag{
  width:100%;
  height：100px;
  border:1px solid #dedede;
}
.my_tag h5,.gg_tag h5{
  font-family: "微软雅黑";
  color:#adacac;
  font-weight: bolder;
  width:auto;
  display: inline-block;
  margin-left:15px;
}
.my_tag_con,.gg_tag_con{
  height: auto;
  cursor: pointer;
  overflow: hidden;
}
.my_tag_con1,.gg_tag_con1{
  float: left;
  margin-left:15px;
}
.my_tag_con1_check,.gg_tag_con1_check{
  width:13px;
  height:13px;
  border:1px solid #dedede;
  cursor: pointer;
}
.my_tag_con1_span,.gg_tag_con1_span{
  color:#adacac;
}
.my_tag .hyp,.gg_tag .hyp{
  position: absolute;
  margin-left:5%;
  margin-top:2px;
  color:#0064B6;
  cursor: pointer;
}
.upl_desc textarea{
  width: 100%;
  height: 100px;
  color:#000;
  border: 1px solid #dedede;
}
.laydate_body .laydate_box,
.laydate_body .laydate_bottom input{
  color:#ffa634 !important;
}
.laydate_body .laydate_top {
  border-top: 1px solid #ffa634;
  background-color: #ffa634;
}
.laydate_body .laydate_ym {
  border: 1px solid #ffa634 !important;
  background-color: #ffa634 !important;
}
.laydate_body .laydate_box a, 
.laydate_body .laydate_box a:hover {
  color: #ffa634 !important;
}
.laydate_body .laydate_chprev {
  border-right: 1px solid #fff !important;
}
.laydate_body .laydate_chnext {
    border-left: 1px solid #fff !important;
}
.laydate_body .laydate_m .laydate_yms span:hover,
.laydate_body .laydate_time .laydate_hmsno span:hover, 
.laydate_body .laydate_y .laydate_yms ul li:hover, 
.laydate_body .laydate_table td:hover,
.laydate_body .laydate_click {
  background-color: #ffa634 !important;
}
.laydate_body .laydate_table td {
  color: #000 !important;
}
.laydate_body .laydate_table .laydate_nothis {
  color: #999 !important;
}
.laydate_body .laydate_ym .laydate_yms {
  border: 1px solid #ffa634 !important;
  background-color: #ffa634 !important;
}
.laydate_body .laydate_y .laydate_yms a {
  border-bottom: 1px solid #fff !important;
}
.laydate_body .laydate_y .laydate_yms .laydate_chdown {
  border-top: 1px solid #fff !important;
}
.laydate_body .laydate_choose:hover, 
.laydate_body .laydate_y .laydate_yms a:hover {
  background-color: #ffaf34 !important;
}
.replace_img{
  position: absolute;
  left:206px;
  width:34px;
  height:32px;
  margin-top:1px;
  border:1px solid #dedede !important;
  background-image: url("img/upl_img7.png") !important;
  background-size:100% 100%;
}
.form-group .btn_group{
  overflow: hidden;
  width:200px;
  margin-left:40%;
}
.form-group .save,
.form-group .submit{
  width:70px;
  height:30px;
  color:#fff;
  border-radius:0;
  padding:0;
  float: left;
  margin-left:25px;
}
.form-group .save{
  background: blue !important;
}
.form-group .submit{
  background: #ffa634 !important;
}
.upl_czfs{
  width:100%;
  height:150px;
  border:1px solid #dedede;
}
.upl_czfs .czfs_tag{
  width:100%;
  height:auto;
  border:1px solid #dedede;
  overflow: hidden;
}
.upl_czfs .czfs_tag .czfs_tag_li{
  float: left;
  position: relative;
  height:25px;
  border:1px solid #000;
  border-radius:9px;
  display: inline-block;
  margin-left:10px;
  margin-top:10px;
  margin-bottom:5px;
  line-height:25px;
  padding:0px 5px 0px 5px;
  cursor: pointer;
}
.upl_czfs .czfs_tag li img{
  position: absolute;
  margin-top:0px;
  margin-left:1px;
  cursor: pointer;
}
.czfs_tag_div{
  overflow: hidden;
  height:35px;
}
.change_czfs{
  width:150px;
  height:30px;
  margin-top:5px;
  padding-left: 7px;
  border:1px solid #dedede;
  appearance:none;
  -moz-appearance:none;
  -webkit-appearance:none;
  background: url("img/upl_img4.png") no-repeat scroll right center transparent;
  padding-right: 14px;
  margin-left:10px;
  float: left;
}
.czfs_author_ipt{
  width:330px;
  height:30px;
  border: 1px solid #dedede;
  padding-left:5px;
  float: left;
  margin-top:5px;
  margin-left:10px;
}
.upl_czfs p{
  margin-left:10px;
  margin-top:5px;
  width:auto;
}
.czfs_author{
  border: 1px solid #dedede;
  width: 40px;
  position: relative;
  height: 30px;
  margin-top: 5px;
  margin-left: 10px;
  padding: 5px;
  float: left;
  cursor: pointer;
}
.uplChannel{
  width: 100%;
  height: 30px;
  margin-top: 5px;
  padding-left: 7px;
  border: 1px solid #dedede;
}
.gray-bg {
  background-color: #f3f3f4;
}

</style>
</head>
<body class="gray-bg laydate_body">
<div class="add">
  <div class="container">
    <div class="row">
      <div class="col-sm-12">
        <div class="ibox float-e-margins">
          <div class="ibox-title iboxtitle">
            <h4>创建专辑</h4>
            <div class="ibox-tools">
              <a class="collapse-link">
                <i class="fa fa-times"></i>
              </a>
            </div>
          </div>
          <div class="ibox-content">
            <form class="form-horizontal">
              <div class="form-group">
                <label class="col-sm-2 control-label">专辑名称<span class="ast">*</span>：</label>
                <div class="col-sm-10" style="padding-left:0px;">
                  <div class="upl_mc">
                    <input type="text" class="uplTitle" placeholder="标题">
                    <p>建议使用简洁明了的标题，请不要包含任何多余信息（如专辑标题、日期）；不超过40个字哦~</p>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 control-label">专辑封面<span class="ast">*</span>：</label>
                <div class="col-sm-10" style="padding-left:0px;">
                  <div class="upl_pt">
                    <div class="previewImg">
                      <img src="" alt="font cover" />
                    </div>
                    <img class="upl_pt_img" src="img/upl_img3.png" alt="" />
                    <p>图片尺寸>500×500px,文件大小≤1兆，支持JPG.PNG的图片格式</p>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 control-label">专辑分类<span class="ast">*</span>：</label>
                <div class="col-sm-10" style="padding-left:0px;">
                  <select name="" class="upl_zj">
                    <option value="">专辑分类一</option>
                    <option value="">专辑分类二</option>
                    <option value="">专辑分类三</option>
                    <option value="">专辑分类四</option>
                    <option value="">专辑分类五</option>
                  </select> 
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 control-label">添加标签<span class="ast">*</span>：</label>
                <div class="col-sm-10" style="padding-left:0px;">
                  <div class="tag_box">
                    <ul class="upl_bq">
                      <!--<li class="upl_bq_img"><span>自定义标签一</span><img class="upl_bq_cancelimg1" src="img/upl_img2.png" alt="" /></li>
                      <li class="upl_bq_img"><span>自定义标签二</span><img class="upl_bq_cancelimg1" src="img/upl_img2.png" alt="" /></li>
                      <li class="upl_bq_img"><span>自定义标签一</span><img class="upl_bq_cancelimg1" src="img/upl_img2.png" alt="" /></li>-->
                    </ul>
                    <div class="input_tag">
                      <input type="text" class="tag_txt"/>
                    </div>
                  </div>
                  <div class="my_tag">
                    <h5>我的标签</h5>
                    <span class="hyp">换一批</span>
                    <ul class="my_tag_con">
                      <li class="my_tag_con1">
                        <input type="checkbox" class="my_tag_con1_check" />
                        <span class="my_tag_con1_span">自定义标签一</span>
                      </li>
                      <li class="my_tag_con1">
                        <input type="checkbox" class="my_tag_con1_check" />
                        <span class="my_tag_con1_span">自定义标签二</span>
                      </li>
                      <li class="my_tag_con1">
                        <input type="checkbox" class="my_tag_con1_check" />
                        <span class="my_tag_con1_span">自定义标签三</span>
                      </li>
                    </ul>
                  </div>
                  <div class="gg_tag">
                    <h5>公共标签</h5>
                    <span class="hyp">换一批</span>
                    <ul class="gg_tag_con">
                      <li class="gg_tag_con1">
                        <input type="checkbox" class="gg_tag_con1_check" />
                        <span class="gg_tag_con1_span">标签一</span>
                      </li>
                      <li class="gg_tag_con1">
                        <input type="checkbox" class="gg_tag_con1_check" />
                        <span class="gg_tag_con1_span">标签二</span>
                      </li>
                      <li class="gg_tag_con1">
                        <input type="checkbox" class="gg_tag_con1_check" />
                        <span class="gg_tag_con1_span">标签三</span>
                      </li>
                    </ul>
                  </div>
                  <p>最多添加5个标签，单个标签最长6个汉字，按回车或空格确认</p>
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 control-label">发布栏目<span class="ast">*</span>：</label>
                <div class="col-sm-10" style="padding-left:0px;">
                  <input type="text" class="uplChannel" placeholder="栏目一">
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 control-label">专辑简介<span style="color:#fff;">*</span>：</label>
                <div class="col-sm-10" style="padding-left:0px;">
                  <div class="upl_desc">
                    <textarea type="text" class="uplDecn" placeholder="关于专辑内容的简单介绍"></textarea>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 control-label">定时发布<span style="color:#fff;">*</span>：</label>
                <div class="col-sm-10" style="padding-left:0px;">
                  <input id="hello" class="form-control layer-date laydate-icon" style="max-width:240px;float:left;" placeholder="YYYY-MM-DD hh:mm:ss" onclick="laydate({istime: true, format: 'YYYY-MM-DD hh:mm:ss'})">
                </div>
              </div>
              <div class="form-group" style="margin-bottom:20px;">
                <div class="btn_group">
                  <button class="btn save" id="saveBtn" type="save">保存</button>
                  <button class="btn submit" id="submitBtn" type="submit">提交</button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div> 
</div>
<script>
var isExisted = true;//定义存在为true
var tag_sum=0;//定义添加的标签数量,最大是5
//添加自定义标签
document.onkeydown = function(event){
  if(event.keyCode == 13||event.keyCode == 32){//13是enter键，32是空格键
    event.preventDefault();
    if($(".tag_txt").val()!=""){
      var count = $(".tag_txt").val().replace(/[^\x00-\xff]/g,"**").length;
      var tagVlaue=$(".tag_txt").val();
      if(count<=12){
        isExiste(tagVlaue);//调用函数判断即将添加的标签是否应经存在
        if(!isExisted){
          if(tag_sum>=5){
            alert("最多添加5个标签");
            $(".tag_txt").val("");
            return;
          }
          var new_my_tag= '<li class="upl_bq_img bqImg">'+
                            '<span>'+$(".tag_txt").val()+'</span>'+
                            '<img class="upl_bq_cancelimg1 cancelImg" src="img/upl_img2.png" alt="" />'+
                          '</li>';
          $(".upl_bq").append(new_my_tag);
          tag_sum++;
        }else{
          alert("你输入的标签已存在");
        }
      }else{
        alert("输入内容超出范围");
      }
      $(".tag_txt").val("");
    }
  }
};

//对新添加的标签的样式改变
$(document).on("mouseenter",".bqImg",function(){
  $(this).children(".cancelImg").show();
});
$(document).on("mouseleave",".bqImg",function(event){
  $(this).children(".cancelImg").hide();
});
$(document).on("mouseenter",".cancelImg",function(){
  event.stopPropagation();
  $(this).attr({"src":"img/upl_img6.png"});
});
$(document).on("mouseleave",".cancelImg",function(event){
  event.stopPropagation();
  $(this).attr({"src":"img/upl_img2.png"});
  $(this).hide();
});

//对我的标签和公共标签进行添加操作
$(document).on("click",".my_tag_con1_check, .gg_tag_con1_check",function(){
  var txt=$(this).siblings("span").html();
  var obj=$(this);
  addTag(obj,txt)
});

//添加标签的方法
function addTag(obj,txt){
  obj.attr("checked",true);
  obj.attr("disabled",true);
  isExiste(txt);//调用函数判断即将添加的标签是否应经存在
  if(!isExisted){
    if(tag_sum>=5){
      alert("最多添加5个标签");
      $(".tag_txt").val("");
      return;
    }
    var new_tag= '<li class="upl_bq_img bqImg">'+
                      '<span>'+txt+'</span>'+
                      '<img class="upl_bq_cancelimg1 cancelImg" src="img/upl_img2.png" alt="" />'+
                    '</li>';
    $(".upl_bq").append(new_tag);
    tag_sum++;
  }
}

//删除新添加的标签
$(document).on("click",".upl_bq_cancelimg1",function(){
  --tag_sum;
  var cancel_txt=$(this).siblings("span").html();
   $(".my_tag_con1,.gg_tag_con1").each(function(){
    if($(this).children("span").html()==cancel_txt){
      $(this).children("input[type='checkbox']").attr("checked",false);
      $(this).children("input[type='checkbox']").attr("disabled",false);
    }
  });
  $(this).parent().remove();
  $(".tag_txt").focus();
});

//判断即将添加标签是否已经存在
function isExiste(objValue){
  if($(document).find(".upl_bq .upl_bq_img").length>0){//如果页面上.upl_bq里面已经存在标签
    $(document).find(".upl_bq .upl_bq_img").each(function(){
      if($(this).children("span").html()==objValue){
        isExisted = true;
        return false;
      }else{
        isExisted=false;
      }
    });
  }else{
    isExisted=false;
  }
}

//点击换一批
$(document).on("click",".hyp",function(){
  alert("请求加载另一批数据");
});

/*创作方式*/
//点击确认按钮，添加创作方式
$(document).on("click",".czfs_author",function(){
  if($(".czfs_author_ipt").val()==""||$(".czfs_author_ipt").val()==null){
    alert("作者名字不能为空");
  }else{
    var new_czfs= '<li class="czfs_tag_li bqImg">'+
                    '<div class="czfs_tag_div">'+
                    '<span class="czfs_tag_span1">'+$(".change_czfs option:selected").text()+' : </span>'+
                    '<span class="czfs_tag_span2">'+$(".czfs_author_ipt").val()+'</span>'+
                    '</div>'+
                    '<img class="cancelImg" src="img/upl_img2.png" alt="" />'+
                  '</li>';
    $(".czfs_tag").append(new_czfs);              
  }
});

//取消新添加的创作方式
$(document).on("click",".cancelImg",function(){
  $(this).parent(".bqImg").remove();
  $(".czfs_author_ipt").val("");
});


window.onresize=function(){
  laydate.reset(); 
}
$("#add").scroll(function () {
  alert(22);
  if ($(window).scrollTop()>=0) {
    alert('bottom!!');
  }
 });


</script>  
</body>
</html>
